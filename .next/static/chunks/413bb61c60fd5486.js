(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72574,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(22623),l=e.i(91432),i=e.i(36073),o=e.i(70065),r=e.i(67881),c=e.i(23750),n=e.i(10708),d=e.i(27341),m=e.i(94179),x=e.i(47627),b=e.i(39616),h=e.i(7233),p=e.i(88699),u=e.i(27612),g=e.i(69638),j=e.i(73884),v=e.i(20682);let N={nombreComercial:"RepairSuite Taller",razonSocial:"RepairSuite S.A. de C.V.",rfc:"RST850623ABC",telefono:"+52 55 1234 5678",email:"contacto@repairsuite.mx",sitioWeb:"https://repairsuite.mx",logo:void 0,sucursales:[{id:"branch-001",nombre:"Sede A - Centro",direccion:{calle:"Av. Insurgentes Sur 1234",colonia:"Del Valle",ciudad:"Ciudad de México",estado:"CDMX",codigoPostal:"03100"},telefono:"+52 55 1234 5678",email:"centro@repairsuite.mx",horario:"Lun-Vie 9:00-19:00, Sáb 9:00-14:00",encargado:"Ana Martínez",prefijoFolios:"A",activa:!0,tieneInventario:!0},{id:"branch-002",nombre:"Sede B - Norte",direccion:{calle:"Av. Politécnico 890",colonia:"Lindavista",ciudad:"Ciudad de México",estado:"CDMX",codigoPostal:"07300"},telefono:"+52 55 8765 4321",email:"norte@repairsuite.mx",horario:"Lun-Vie 10:00-18:00, Sáb 10:00-15:00",encargado:"Carlos Gómez",prefijoFolios:"B",activa:!0,tieneInventario:!0},{id:"branch-003",nombre:"Sede C - Sur",direccion:{calle:"Calz. Tlalpan 567",colonia:"Portales",ciudad:"Ciudad de México",estado:"CDMX",codigoPostal:"03300"},telefono:"+52 55 5555 1234",email:"sur@repairsuite.mx",horario:"Lun-Sáb 9:00-18:00",encargado:"Luis Torres",prefijoFolios:"C",activa:!0,tieneInventario:!0}],estadosOS:[{id:"status-001",nombre:"Recibida",tipo:"Proceso",color:"#3b82f6",orden:1,locked:!1,notificarCliente:!0,mensajeNotificacion:"Hemos recibido tu equipo {equipo}. Folio: {folio}",cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Equipo recibido en el taller"},{id:"status-002",nombre:"En diagnóstico",tipo:"Proceso",color:"#8b5cf6",orden:2,locked:!0,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Técnico está diagnosticando el equipo"},{id:"status-003",nombre:"Cotización pendiente",tipo:"Aprobación",color:"#f59e0b",orden:3,locked:!1,notificarCliente:!0,mensajeNotificacion:"Tu cotización está lista. Total: {total}. Folio: {folio}",cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Esperando aprobación del cliente"},{id:"status-004",nombre:"Aprobada",tipo:"Aprobación",color:"#10b981",orden:4,locked:!1,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Cliente aprobó la cotización"},{id:"status-005",nombre:"En proceso",tipo:"Proceso",color:"#6366f1",orden:5,locked:!0,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Técnico está trabajando en la reparación"},{id:"status-006",nombre:"Esperando refacción",tipo:"Proceso",color:"#f97316",orden:6,locked:!1,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Esperando llegada de refacciones"},{id:"status-007",nombre:"Listo para entrega",tipo:"Entrega",color:"#22c55e",orden:7,locked:!0,notificarCliente:!0,mensajeNotificacion:"¡Tu equipo {equipo} está listo! Puedes pasar a recogerlo. Folio: {folio}",cambiarEstadoPago:!1,cerrarOrden:!1,descripcion:"Reparación completada, listo para recoger"},{id:"status-008",nombre:"Completada y pagada",tipo:"Cierre",color:"#059669",orden:8,locked:!0,notificarCliente:!1,cambiarEstadoPago:!0,nuevoEstadoPago:"Pagado",cerrarOrden:!0,descripcion:"Orden completada y pagada en su totalidad"},{id:"status-009",nombre:"Entregada",tipo:"Cierre",color:"#14b8a6",orden:9,locked:!1,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!0,descripcion:"Equipo entregado al cliente"},{id:"status-010",nombre:"Cancelada",tipo:"Cancelación",color:"#ef4444",orden:10,locked:!0,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!0,descripcion:"Orden cancelada por el cliente o el taller"},{id:"status-011",nombre:"Equipo abandonado",tipo:"Automático",color:"#6b7280",orden:11,locked:!0,notificarCliente:!1,cambiarEstadoPago:!1,cerrarOrden:!0,descripcion:"Cliente no recogió el equipo en el tiempo establecido"}],politicas:{diasMaximoAlmacenamiento:90,diasAbandonoPotencial:30,diasEquipoAbandonado:60,garantiaEstandarServicios:30,garantiaEstandarRefacciones:90,penalizacionPorAbandono:500,aplicarPenalizacion:!0,recordarTecnicoDespuesDias:7,recordarRecepcionDespuesDias:15,permitirPagoParcial:!0,porcentajeMinimoAnticipo:50},plantillasNotificaciones:[{id:"template-001",nombre:"OS Creada",tipo:"WhatsApp",evento:"OS Creada",mensaje:"Hola {cliente}, hemos recibido tu {equipo}. Tu folio es: {folio}. Te mantendremos informado del proceso. Gracias por confiar en {sucursal}.",variables:["cliente","equipo","folio","sucursal"],activo:!0},{id:"template-002",nombre:"Listo para entrega",tipo:"WhatsApp",evento:"Listo para entrega",mensaje:"¡Buenas noticias {cliente}! Tu {equipo} está listo para ser recogido. Folio: {folio}. Horario: {sucursal}. ¡Te esperamos!",variables:["cliente","equipo","folio","sucursal"],activo:!0},{id:"template-003",nombre:"Cotización por email",tipo:"Email",evento:"Cotización",asunto:"Cotización para tu {equipo} - Folio {folio}",mensaje:"Estimado/a {cliente},\n\nTe enviamos la cotización para la reparación de tu {equipo}.\n\nFolio: {folio}\nTotal: {total}\n\nPor favor confirma si deseas proceder con la reparación.\n\nSaludos,\n{sucursal}\n{telefono}",variables:["cliente","equipo","folio","total","sucursal","telefono"],activo:!0},{id:"template-004",nombre:"Pago recibido",tipo:"WhatsApp",evento:"Pago recibido",mensaje:"Hola {cliente}, hemos recibido tu pago de {total}. Folio: {folio}. ¡Gracias!",variables:["cliente","total","folio"],activo:!0},{id:"template-005",nombre:"Recordatorio de pago",tipo:"WhatsApp",evento:"Recordatorio",mensaje:"Hola {cliente}, te recordamos que tienes un saldo pendiente en tu orden {folio}. Puedes pasar a {sucursal} para liquidarlo. ¡Gracias!",variables:["cliente","folio","sucursal"],activo:!0}],formatoFolio:"RS-OS-{numero}",siguienteFolio:1025,moneda:"MXN",simboloMoneda:"$"};var f=e.i(30374),C=e.i(25959),S=e.i(63209);function P({open:e,onOpenChange:t,branch:l,onSave:i}){let{toast:o}=(0,v.useToast)(),d=!!l,[m,x]=(0,s.useState)({nombre:"",calle:"",colonia:"",ciudad:"",estado:"",codigoPostal:"",telefono:"",email:"",horario:"Lun-Vie 9:00-18:00",encargado:"",prefijoFolios:"",activa:!0,tieneInventario:!0}),[b,h]=(0,s.useState)({});return(0,s.useEffect)(()=>{l?x({nombre:l.nombre,calle:l.direccion.calle,colonia:l.direccion.colonia,ciudad:l.direccion.ciudad,estado:l.direccion.estado,codigoPostal:l.direccion.codigoPostal,telefono:l.telefono,email:l.email,horario:l.horario,encargado:l.encargado,prefijoFolios:l.prefijoFolios,activa:l.activa,tieneInventario:l.tieneInventario}):x({nombre:"",calle:"",colonia:"",ciudad:"",estado:"",codigoPostal:"",telefono:"",email:"",horario:"Lun-Vie 9:00-18:00",encargado:"",prefijoFolios:"",activa:!0,tieneInventario:!0}),h({})},[l,e]),(0,a.jsx)(f.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(f.DialogContent,{className:"bg-slate-900 border-slate-800 text-slate-100 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsx)(f.DialogTitle,{className:"text-slate-100 text-xl",children:d?"Editar Sucursal":"Nueva Sucursal"})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"nombre",className:"text-slate-200",children:["Nombre de la Sucursal ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"nombre",value:m.nombre,onChange:e=>x({...m,nombre:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${b.nombre?"border-red-500":""}`,placeholder:"Sede A - Centro"}),b.nombre&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.nombre]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"calle",className:"text-slate-200",children:"Calle"}),(0,a.jsx)(c.Input,{id:"calle",value:m.calle,onChange:e=>x({...m,calle:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"Av. Principal 123"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"colonia",className:"text-slate-200",children:"Colonia"}),(0,a.jsx)(c.Input,{id:"colonia",value:m.colonia,onChange:e=>x({...m,colonia:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"Centro"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"ciudad",className:"text-slate-200",children:"Ciudad"}),(0,a.jsx)(c.Input,{id:"ciudad",value:m.ciudad,onChange:e=>x({...m,ciudad:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"estado",className:"text-slate-200",children:"Estado"}),(0,a.jsx)(c.Input,{id:"estado",value:m.estado,onChange:e=>x({...m,estado:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"codigoPostal",className:"text-slate-200",children:"CP"}),(0,a.jsx)(c.Input,{id:"codigoPostal",value:m.codigoPostal,onChange:e=>x({...m,codigoPostal:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"telefono",className:"text-slate-200",children:["Teléfono ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"telefono",value:m.telefono,onChange:e=>x({...m,telefono:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${b.telefono?"border-red-500":""}`,placeholder:"+52 55 1234 5678"}),b.telefono&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.telefono]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"email",className:"text-slate-200",children:["Email ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"email",type:"email",value:m.email,onChange:e=>x({...m,email:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${b.email?"border-red-500":""}`,placeholder:"sucursal@ejemplo.com"}),b.email&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.email]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"horario",className:"text-slate-200",children:"Horario"}),(0,a.jsx)(c.Input,{id:"horario",value:m.horario,onChange:e=>x({...m,horario:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"Lun-Vie 9:00-18:00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"encargado",className:"text-slate-200",children:"Encargado"}),(0,a.jsx)(c.Input,{id:"encargado",value:m.encargado,onChange:e=>x({...m,encargado:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"prefijoFolios",className:"text-slate-200",children:["Prefijo de Folios ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"prefijoFolios",value:m.prefijoFolios,onChange:e=>x({...m,prefijoFolios:e.target.value.toUpperCase()}),className:`bg-slate-800 border-slate-700 text-slate-100 max-w-xs ${b.prefijoFolios?"border-red-500":""}`,placeholder:"A",maxLength:3}),b.prefijoFolios&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.prefijoFolios]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"activa",checked:m.activa,onCheckedChange:e=>x({...m,activa:e}),className:"border-slate-600 data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),(0,a.jsx)("label",{htmlFor:"activa",className:"text-sm text-slate-300 cursor-pointer",children:"Sucursal activa"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"tieneInventario",checked:m.tieneInventario,onCheckedChange:e=>x({...m,tieneInventario:e}),className:"border-slate-600"}),(0,a.jsx)("label",{htmlFor:"tieneInventario",className:"text-sm text-slate-300 cursor-pointer",children:"Tiene inventario"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>t(!1),className:"border-slate-700 text-slate-300 hover:bg-slate-800",children:"Cancelar"}),(0,a.jsxs)(r.Button,{onClick:()=>{let e;if(e={},m.nombre.trim()||(e.nombre="El nombre es requerido"),m.telefono.trim()||(e.telefono="El teléfono es requerido"),m.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)||(e.email="Formato de email inválido"):e.email="El email es requerido",m.prefijoFolios.trim()||(e.prefijoFolios="El prefijo es requerido"),h(e),0!==Object.keys(e).length)return;let a={nombre:m.nombre,direccion:{calle:m.calle,colonia:m.colonia,ciudad:m.ciudad,estado:m.estado,codigoPostal:m.codigoPostal},telefono:m.telefono,email:m.email,horario:m.horario,encargado:m.encargado,prefijoFolios:m.prefijoFolios,activa:m.activa,tieneInventario:m.tieneInventario};i?.(a),o({title:d?"Sucursal actualizada":"Sucursal creada",description:`${m.nombre} ha sido ${d?"actualizada":"agregada"} correctamente.`}),t(!1)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[d?"Actualizar":"Crear"," Sucursal"]})]})]})})}var y=e.i(62870),E=e.i(84762);let T=[{value:"#3b82f6",label:"Azul"},{value:"#8b5cf6",label:"Púrpura"},{value:"#f59e0b",label:"Ámbar"},{value:"#10b981",label:"Verde"},{value:"#6366f1",label:"Índigo"},{value:"#f97316",label:"Naranja"},{value:"#22c55e",label:"Verde claro"},{value:"#059669",label:"Esmeralda"},{value:"#14b8a6",label:"Teal"},{value:"#ef4444",label:"Rojo"},{value:"#6b7280",label:"Gris"}];function k({open:e,onOpenChange:t,status:l,onSave:i}){let{toast:o}=(0,v.useToast)(),d=!!l,[m,x]=(0,s.useState)({nombre:"",tipo:"Proceso",color:"#3b82f6",descripcion:"",notificarCliente:!1,mensajeNotificacion:"",cambiarEstadoPago:!1,nuevoEstadoPago:"Pendiente",cerrarOrden:!1}),[b,h]=(0,s.useState)({});return(0,s.useEffect)(()=>{l?x({nombre:l.nombre,tipo:l.tipo,color:l.color,descripcion:l.descripcion||"",notificarCliente:l.notificarCliente,mensajeNotificacion:l.mensajeNotificacion||"",cambiarEstadoPago:l.cambiarEstadoPago,nuevoEstadoPago:l.nuevoEstadoPago||"Pendiente",cerrarOrden:l.cerrarOrden}):x({nombre:"",tipo:"Proceso",color:"#3b82f6",descripcion:"",notificarCliente:!1,mensajeNotificacion:"",cambiarEstadoPago:!1,nuevoEstadoPago:"Pendiente",cerrarOrden:!1}),h({})},[l,e]),(0,a.jsx)(f.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(f.DialogContent,{className:"bg-slate-900 border-slate-800 text-slate-100 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsx)(f.DialogTitle,{className:"text-slate-100 text-xl",children:d?"Editar Estado":"Nuevo Estado"})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"nombre",className:"text-slate-200",children:["Nombre del Estado ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"nombre",value:m.nombre,onChange:e=>x({...m,nombre:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${b.nombre?"border-red-500":""}`,placeholder:"En diagnóstico"}),b.nombre&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.nombre]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"tipo",className:"text-slate-200",children:"Tipo"}),(0,a.jsxs)(y.Select,{value:m.tipo,onValueChange:e=>x({...m,tipo:e}),children:[(0,a.jsx)(y.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,a.jsx)(y.SelectValue,{})}),(0,a.jsxs)(y.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,a.jsx)(y.SelectItem,{value:"Proceso",className:"text-slate-300",children:"Proceso"}),(0,a.jsx)(y.SelectItem,{value:"Aprobación",className:"text-slate-300",children:"Aprobación"}),(0,a.jsx)(y.SelectItem,{value:"Pago",className:"text-slate-300",children:"Pago"}),(0,a.jsx)(y.SelectItem,{value:"Entrega",className:"text-slate-300",children:"Entrega"}),(0,a.jsx)(y.SelectItem,{value:"Cierre",className:"text-slate-300",children:"Cierre"}),(0,a.jsx)(y.SelectItem,{value:"Cancelación",className:"text-slate-300",children:"Cancelación"}),(0,a.jsx)(y.SelectItem,{value:"Automático",className:"text-slate-300",children:"Automático"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"color",className:"text-slate-200",children:"Color"}),(0,a.jsxs)(y.Select,{value:m.color,onValueChange:e=>x({...m,color:e}),children:[(0,a.jsx)(y.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,a.jsx)(y.SelectValue,{})}),(0,a.jsx)(y.SelectContent,{className:"bg-slate-900 border-slate-700",children:T.map(e=>(0,a.jsx)(y.SelectItem,{value:e.value,className:"text-slate-300",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.value}}),e.label]})},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"descripcion",className:"text-slate-200",children:"Descripción"}),(0,a.jsx)(E.Textarea,{id:"descripcion",value:m.descripcion,onChange:e=>x({...m,descripcion:e.target.value}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"Descripción del estado...",rows:2})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50 space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-300",children:"Automaciones"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"notificarCliente",checked:m.notificarCliente,onCheckedChange:e=>x({...m,notificarCliente:e}),className:"border-slate-600"}),(0,a.jsx)("label",{htmlFor:"notificarCliente",className:"text-sm text-slate-300 cursor-pointer",children:"Notificar al cliente"})]}),m.notificarCliente&&(0,a.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"mensajeNotificacion",className:"text-slate-200 text-xs",children:"Mensaje de notificación"}),(0,a.jsx)(E.Textarea,{id:"mensajeNotificacion",value:m.mensajeNotificacion,onChange:e=>x({...m,mensajeNotificacion:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${b.mensajeNotificacion?"border-red-500":""}`,placeholder:"Usa {cliente}, {equipo}, {folio}, etc.",rows:2}),b.mensajeNotificacion&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),b.mensajeNotificacion]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"cambiarEstadoPago",checked:m.cambiarEstadoPago,onCheckedChange:e=>x({...m,cambiarEstadoPago:e}),className:"border-slate-600"}),(0,a.jsx)("label",{htmlFor:"cambiarEstadoPago",className:"text-sm text-slate-300 cursor-pointer",children:"Cambiar estado de pago"})]}),m.cambiarEstadoPago&&(0,a.jsx)("div",{className:"ml-6",children:(0,a.jsxs)(y.Select,{value:m.nuevoEstadoPago,onValueChange:e=>x({...m,nuevoEstadoPago:e}),children:[(0,a.jsx)(y.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,a.jsx)(y.SelectValue,{})}),(0,a.jsxs)(y.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,a.jsx)(y.SelectItem,{value:"Pendiente",className:"text-slate-300",children:"Pendiente"}),(0,a.jsx)(y.SelectItem,{value:"Parcial",className:"text-slate-300",children:"Parcial"}),(0,a.jsx)(y.SelectItem,{value:"Pagado",className:"text-slate-300",children:"Pagado"})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"cerrarOrden",checked:m.cerrarOrden,onCheckedChange:e=>x({...m,cerrarOrden:e}),className:"border-slate-600"}),(0,a.jsx)("label",{htmlFor:"cerrarOrden",className:"text-sm text-slate-300 cursor-pointer",children:"Cerrar orden automáticamente"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>t(!1),className:"border-slate-700 text-slate-300 hover:bg-slate-800",children:"Cancelar"}),(0,a.jsxs)(r.Button,{onClick:()=>{let e;if(e={},m.nombre.trim()||(e.nombre="El nombre es requerido"),m.notificarCliente&&!m.mensajeNotificacion.trim()&&(e.mensajeNotificacion="El mensaje es requerido si se notifica al cliente"),h(e),0!==Object.keys(e).length)return;let a={nombre:m.nombre,tipo:m.tipo,color:m.color,descripcion:m.descripcion,notificarCliente:m.notificarCliente,mensajeNotificacion:m.notificarCliente?m.mensajeNotificacion:void 0,cambiarEstadoPago:m.cambiarEstadoPago,nuevoEstadoPago:m.cambiarEstadoPago?m.nuevoEstadoPago:void 0,cerrarOrden:m.cerrarOrden};i?.(a),o({title:d?"Estado actualizado":"Estado creado",description:`${m.nombre} ha sido ${d?"actualizado":"agregado"} correctamente.`}),t(!1)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[d?"Actualizar":"Crear"," Estado"]})]})]})})}let F=[{key:"{cliente}",description:"Nombre del cliente"},{key:"{folio}",description:"Folio de la orden"},{key:"{total}",description:"Total de la orden"},{key:"{fecha}",description:"Fecha actual"},{key:"{equipo}",description:"Equipo del cliente"},{key:"{tecnico}",description:"Técnico asignado"},{key:"{sucursal}",description:"Nombre de la sucursal"},{key:"{telefono}",description:"Teléfono del taller"}];function w({open:e,onOpenChange:t,template:l,onSave:i}){let{toast:o}=(0,v.useToast)(),d=!!l,[x,b]=(0,s.useState)({nombre:"",tipo:"WhatsApp",evento:"OS Creada",asunto:"",mensaje:"",activo:!0}),[h,p]=(0,s.useState)({});return(0,s.useEffect)(()=>{l?b({nombre:l.nombre,tipo:l.tipo,evento:l.evento,asunto:l.asunto||"",mensaje:l.mensaje,activo:l.activo}):b({nombre:"",tipo:"WhatsApp",evento:"OS Creada",asunto:"",mensaje:"",activo:!0}),p({})},[l,e]),(0,a.jsx)(f.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(f.DialogContent,{className:"bg-slate-900 border-slate-800 text-slate-100 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsx)(f.DialogTitle,{className:"text-slate-100 text-xl",children:d?"Editar Plantilla":"Nueva Plantilla de Notificación"})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"nombre",className:"text-slate-200",children:["Nombre de la Plantilla ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"nombre",value:x.nombre,onChange:e=>b({...x,nombre:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${h.nombre?"border-red-500":""}`,placeholder:"OS Creada"}),h.nombre&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),h.nombre]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"tipo",className:"text-slate-200",children:"Tipo"}),(0,a.jsxs)(y.Select,{value:x.tipo,onValueChange:e=>b({...x,tipo:e}),children:[(0,a.jsx)(y.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,a.jsx)(y.SelectValue,{})}),(0,a.jsxs)(y.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,a.jsx)(y.SelectItem,{value:"WhatsApp",className:"text-slate-300",children:"WhatsApp"}),(0,a.jsx)(y.SelectItem,{value:"Email",className:"text-slate-300",children:"Email"}),(0,a.jsx)(y.SelectItem,{value:"SMS",className:"text-slate-300",children:"SMS"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"evento",className:"text-slate-200",children:"Evento"}),(0,a.jsxs)(y.Select,{value:x.evento,onValueChange:e=>b({...x,evento:e}),children:[(0,a.jsx)(y.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,a.jsx)(y.SelectValue,{})}),(0,a.jsxs)(y.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,a.jsx)(y.SelectItem,{value:"OS Creada",className:"text-slate-300",children:"OS Creada"}),(0,a.jsx)(y.SelectItem,{value:"Listo para entrega",className:"text-slate-300",children:"Listo para entrega"}),(0,a.jsx)(y.SelectItem,{value:"Cotización",className:"text-slate-300",children:"Cotización"}),(0,a.jsx)(y.SelectItem,{value:"Pago recibido",className:"text-slate-300",children:"Pago recibido"}),(0,a.jsx)(y.SelectItem,{value:"Recordatorio",className:"text-slate-300",children:"Recordatorio"})]})]})]})]}),"Email"===x.tipo&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"asunto",className:"text-slate-200",children:["Asunto ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(c.Input,{id:"asunto",value:x.asunto,onChange:e=>b({...x,asunto:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${h.asunto?"border-red-500":""}`,placeholder:"Cotización para tu {equipo}"}),h.asunto&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),h.asunto]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.Label,{htmlFor:"mensaje",className:"text-slate-200",children:["Mensaje ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)(E.Textarea,{id:"mensaje",value:x.mensaje,onChange:e=>b({...x,mensaje:e.target.value}),className:`bg-slate-800 border-slate-700 text-slate-100 ${h.mensaje?"border-red-500":""}`,placeholder:"Hola {cliente}, tu equipo {equipo} está listo...",rows:4}),h.mensaje&&(0,a.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,a.jsx)(S.AlertCircle,{className:"h-3 w-3"}),h.mensaje]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Variables Disponibles"}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Haz clic en una variable para insertarla en el mensaje"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(e=>(0,a.jsx)(m.Badge,{className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20 text-xs cursor-pointer hover:bg-indigo-500/20",onClick:()=>(e=>{let a=document.getElementById("mensaje");if(a){let s=a.selectionStart,t=a.selectionEnd,l=x.mensaje,i=l.substring(0,s),o=l.substring(t,l.length);b({...x,mensaje:i+e+o}),setTimeout(()=>{a.focus(),a.setSelectionRange(s+e.length,s+e.length)},0)}})(e.key),children:e.key},e.key))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.Checkbox,{id:"activo",checked:x.activo,onCheckedChange:e=>b({...x,activo:e}),className:"border-slate-600 data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),(0,a.jsx)("label",{htmlFor:"activo",className:"text-sm text-slate-300 cursor-pointer",children:"Plantilla activa"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>t(!1),className:"border-slate-700 text-slate-300 hover:bg-slate-800",children:"Cancelar"}),(0,a.jsxs)(r.Button,{onClick:()=>{let e;if(e={},x.nombre.trim()||(e.nombre="El nombre es requerido"),x.mensaje.trim()||(e.mensaje="El mensaje es requerido"),"Email"!==x.tipo||x.asunto.trim()||(e.asunto="El asunto es requerido para emails"),p(e),0!==Object.keys(e).length)return;let a={nombre:x.nombre,tipo:x.tipo,evento:x.evento,asunto:"Email"===x.tipo?x.asunto:void 0,mensaje:x.mensaje,activo:x.activo};i?.(a),o({title:d?"Plantilla actualizada":"Plantilla creada",description:`${x.nombre} ha sido ${d?"actualizada":"creada"} correctamente.`}),t(!1)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[d?"Actualizar":"Crear"," Plantilla"]})]})]})})}function I(){let{hasPermission:e}=(0,l.useAuth)(),{toast:f}=(0,v.useToast)(),[C,S]=(0,s.useState)(N),[y,E]=(0,s.useState)(!1),[T,F]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),[L,O]=(0,s.useState)(null),[z,q]=(0,s.useState)(null),[B,D]=(0,s.useState)(null);return e("configuracion")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.DashboardHeader,{title:"Configuración"}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:(0,a.jsxs)("div",{className:"max-w-[1400px] mx-auto space-y-6",children:[(0,a.jsx)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"rounded-lg bg-indigo-600 p-2",children:(0,a.jsx)(b.Settings,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-100",children:"Configuración del Sistema"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Administra los parámetros generales de RepairSuite"})]})]})}),(0,a.jsxs)(d.Tabs,{defaultValue:"general",className:"w-full",children:[(0,a.jsxs)(d.TabsList,{className:"grid w-full grid-cols-5 bg-slate-900/60 backdrop-blur-sm border-white/5",children:[(0,a.jsx)(d.TabsTrigger,{value:"general",children:"General"}),(0,a.jsx)(d.TabsTrigger,{value:"sucursales",children:"Sucursales"}),(0,a.jsx)(d.TabsTrigger,{value:"estados",children:"Estados de OS"}),(0,a.jsx)(d.TabsTrigger,{value:"politicas",children:"Políticas"}),(0,a.jsx)(d.TabsTrigger,{value:"notificaciones",children:"Notificaciones"})]}),(0,a.jsx)(d.TabsContent,{value:"general",className:"mt-6",children:(0,a.jsxs)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Datos del Taller"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"nombreComercial",className:"text-slate-200",children:"Nombre Comercial"}),(0,a.jsx)(c.Input,{id:"nombreComercial",value:C.nombreComercial,onChange:e=>S({...C,nombreComercial:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"razonSocial",className:"text-slate-200",children:"Razón Social"}),(0,a.jsx)(c.Input,{id:"razonSocial",value:C.razonSocial,onChange:e=>S({...C,razonSocial:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"rfc",className:"text-slate-200",children:"RFC"}),(0,a.jsx)(c.Input,{id:"rfc",value:C.rfc,onChange:e=>S({...C,rfc:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"telefono",className:"text-slate-200",children:"Teléfono"}),(0,a.jsx)(c.Input,{id:"telefono",value:C.telefono,onChange:e=>S({...C,telefono:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"email",className:"text-slate-200",children:"Email"}),(0,a.jsx)(c.Input,{id:"email",type:"email",value:C.email,onChange:e=>S({...C,email:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"sitioWeb",className:"text-slate-200",children:"Sitio Web"}),(0,a.jsx)(c.Input,{id:"sitioWeb",value:C.sitioWeb||"",onChange:e=>S({...C,sitioWeb:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100",placeholder:"https://ejemplo.com"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"formatoFolio",className:"text-slate-200",children:"Formato de Folio"}),(0,a.jsx)(c.Input,{id:"formatoFolio",value:C.formatoFolio,onChange:e=>S({...C,formatoFolio:e.target.value}),className:"bg-slate-800/40 border-slate-700 text-slate-100"}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Usa ","{numero}"," para el número secuencial"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"siguienteFolio",className:"text-slate-200",children:"Siguiente Folio"}),(0,a.jsx)(c.Input,{id:"siguienteFolio",type:"number",value:C.siguienteFolio,onChange:e=>S({...C,siguienteFolio:parseInt(e.target.value)}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})]}),(0,a.jsx)(r.Button,{onClick:()=>{f({title:"Configuración guardada",description:"Los datos generales se han guardado correctamente."})},className:"bg-indigo-600 hover:bg-indigo-500 mt-6",children:"Guardar Configuración General"})]})]})}),(0,a.jsx)(d.TabsContent,{value:"sucursales",className:"mt-6",children:(0,a.jsxs)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5",children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200",children:"Sucursales"}),(0,a.jsxs)(r.Button,{size:"sm",onClick:()=>{O(null),E(!0)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[(0,a.jsx)(h.Plus,{className:"h-4 w-4 mr-1"}),"Agregar Sucursal"]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(x.Table,{children:[(0,a.jsx)(x.TableHeader,{children:(0,a.jsxs)(x.TableRow,{className:"border-white/5 hover:bg-transparent",children:[(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Nombre"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Dirección"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Teléfono"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Encargado"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Prefijo"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Estado"}),(0,a.jsx)(x.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Acciones"})]})}),(0,a.jsx)(x.TableBody,{children:C.sucursales.map((e,s)=>(0,a.jsxs)(x.TableRow,{className:"border-white/5 hover:bg-white/[0.02] text-slate-300",children:[(0,a.jsx)(x.TableCell,{className:"text-[13px] font-medium text-slate-200",children:e.nombre}),(0,a.jsxs)(x.TableCell,{className:"text-[12px] text-slate-400",children:[e.direccion.calle,", ",e.direccion.colonia]}),(0,a.jsx)(x.TableCell,{className:"text-[12px] text-slate-400 font-mono",children:e.telefono}),(0,a.jsx)(x.TableCell,{className:"text-[12px] text-slate-400",children:e.encargado}),(0,a.jsx)(x.TableCell,{children:(0,a.jsx)(m.Badge,{className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20 text-xs font-mono",children:e.prefijoFolios})}),(0,a.jsx)(x.TableCell,{children:e.activa?(0,a.jsxs)(m.Badge,{className:"bg-green-500/10 text-green-400 border-green-500/20 text-xs",children:[(0,a.jsx)(g.CheckCircle,{className:"h-3 w-3 mr-1"}),"Activa"]}):(0,a.jsxs)(m.Badge,{className:"bg-slate-500/10 text-slate-400 border-slate-500/20 text-xs",children:[(0,a.jsx)(j.XCircle,{className:"h-3 w-3 mr-1"}),"Inactiva"]})}),(0,a.jsx)(x.TableCell,{children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",onClick:()=>{O(e),E(!0)},className:"h-7 w-7 p-0 text-slate-400 hover:text-amber-400 hover:bg-amber-500/10",children:(0,a.jsx)(p.Pencil,{className:"h-3.5 w-3.5"})})})})]},e.id))})]})})]})}),(0,a.jsx)(d.TabsContent,{value:"estados",className:"mt-6",children:(0,a.jsxs)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5",children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200",children:"Estados de Órdenes de Servicio"}),(0,a.jsxs)(r.Button,{size:"sm",onClick:()=>{q(null),F(!0)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[(0,a.jsx)(h.Plus,{className:"h-4 w-4 mr-1"}),"Agregar Estado"]})]})}),(0,a.jsx)("div",{className:"p-6 space-y-3",children:C.estadosOS.map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50 hover:bg-slate-800/50 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-200",children:e.nombre}),(0,a.jsx)(m.Badge,{className:"bg-slate-700/50 text-slate-300 text-[10px] px-1.5 py-0",children:e.tipo}),e.locked&&(0,a.jsx)(m.Badge,{className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20 text-[10px] px-1.5 py-0",children:"Bloqueado"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-400",children:[e.notificarCliente&&(0,a.jsx)("span",{children:"✓ Notifica cliente"}),e.cambiarEstadoPago&&(0,a.jsx)("span",{children:"✓ Cambia estado pago"}),e.cerrarOrden&&(0,a.jsx)("span",{children:"✓ Cierra orden"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",onClick:()=>{q(e),F(!0)},className:"h-7 w-7 p-0 text-slate-400 hover:text-amber-400 hover:bg-amber-500/10",children:(0,a.jsx)(p.Pencil,{className:"h-3.5 w-3.5"})}),!e.locked&&(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(u.Trash2,{className:"h-3.5 w-3.5"})})]})]})},e.id))})]})}),(0,a.jsx)(d.TabsContent,{value:"politicas",className:"mt-6",children:(0,a.jsxs)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Políticas del Negocio"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-300 mb-4",children:"Almacenamiento y Abandono"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"Días máximo almacenamiento"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.diasMaximoAlmacenamiento,onChange:e=>S({...C,politicas:{...C.politicas,diasMaximoAlmacenamiento:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"Días abandono potencial"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.diasAbandonoPotencial,onChange:e=>S({...C,politicas:{...C.politicas,diasAbandonoPotencial:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"Días equipo abandonado"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.diasEquipoAbandonado,onChange:e=>S({...C,politicas:{...C.politicas,diasEquipoAbandonado:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-300 mb-4",children:"Garantías"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"Garantía servicios (días)"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.garantiaEstandarServicios,onChange:e=>S({...C,politicas:{...C.politicas,garantiaEstandarServicios:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"Garantía refacciones (días)"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.garantiaEstandarRefacciones,onChange:e=>S({...C,politicas:{...C.politicas,garantiaEstandarRefacciones:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-slate-300 mb-4",children:"Pagos"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{className:"text-slate-400 text-xs",children:"% Mínimo anticipo"}),(0,a.jsx)(c.Input,{type:"number",value:C.politicas.porcentajeMinimoAnticipo,onChange:e=>S({...C,politicas:{...C.politicas,porcentajeMinimoAnticipo:parseInt(e.target.value)}}),className:"bg-slate-800/40 border-slate-700 text-slate-100"})]})})]}),(0,a.jsx)(r.Button,{onClick:()=>{f({title:"Políticas guardadas",description:"Las políticas del negocio se han actualizado correctamente."})},className:"bg-indigo-600 hover:bg-indigo-500",children:"Guardar Políticas"})]})]})}),(0,a.jsx)(d.TabsContent,{value:"notificaciones",className:"mt-6",children:(0,a.jsxs)(o.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5",children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200",children:"Plantillas de Notificaciones"}),(0,a.jsxs)(r.Button,{size:"sm",onClick:()=>{D(null),A(!0)},className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[(0,a.jsx)(h.Plus,{className:"h-4 w-4 mr-1"}),"Nueva Plantilla"]})]})}),(0,a.jsx)("div",{className:"p-6 space-y-3",children:C.plantillasNotificaciones.map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-slate-700/50 hover:bg-slate-800/50 transition-all",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-200",children:e.nombre}),(0,a.jsx)(m.Badge,{className:"bg-blue-500/10 text-blue-400 border-blue-500/20 text-[10px] px-1.5 py-0",children:e.tipo}),(0,a.jsx)(m.Badge,{className:"bg-slate-700/50 text-slate-300 text-[10px] px-1.5 py-0",children:e.evento}),e.activo?(0,a.jsx)(m.Badge,{className:"bg-green-500/10 text-green-400 border-green-500/20 text-[10px] px-1.5 py-0",children:"Activo"}):(0,a.jsx)(m.Badge,{className:"bg-slate-500/10 text-slate-400 border-slate-500/20 text-[10px] px-1.5 py-0",children:"Inactivo"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-400 leading-relaxed",children:e.mensaje})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-4",children:[(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",onClick:()=>{D(e),A(!0)},className:"h-7 w-7 p-0 text-slate-400 hover:text-amber-400 hover:bg-amber-500/10",children:(0,a.jsx)(p.Pencil,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(u.Trash2,{className:"h-3.5 w-3.5"})})]})]})},e.id))})]})})]})]})}),(0,a.jsx)(P,{open:y,onOpenChange:E,branch:L,onSave:e=>{console.log("Branch saved:",e)}}),(0,a.jsx)(k,{open:T,onOpenChange:F,status:z,onSave:e=>{console.log("Status saved:",e)}}),(0,a.jsx)(w,{open:I,onOpenChange:A,template:B,onSave:e=>{console.log("Template saved:",e)}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.DashboardHeader,{title:"Configuración"}),(0,a.jsx)(i.AccessDenied,{})]})}e.s(["default",()=>I],72574)}]);