module.exports=[97064,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(69265),f=a.i(21937),g=a.i(32335),h=a.i(54161),i=a.i(70106);let j=(0,i.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),k=(0,i.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),l=(0,i.default)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),m=(0,i.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var n=a.i(67900);let o=(0,i.default)("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);function p({metodo:a,showIcon:c=!0}){let d={Efectivo:{className:"bg-green-500/10 text-green-400 border-green-500/20",icon:j},Tarjeta:{className:"bg-blue-500/10 text-blue-400 border-blue-500/20",icon:k},Transferencia:{className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20",icon:l},MercadoPago:{className:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",icon:m},Depósito:{className:"bg-purple-500/10 text-purple-400 border-purple-500/20",icon:n.Building2},Mixto:{className:"bg-orange-500/10 text-orange-400 border-orange-500/20",icon:o}}[a],e=d.icon;return(0,b.jsxs)(h.Badge,{className:`${d.className} font-medium text-xs`,children:[c&&(0,b.jsx)(e,{className:"h-3 w-3 mr-1"}),a]})}var q=a.i(16201),r=a.i(41710),s=a.i(92e3),t=a.i(73570);function u({estado:a,showIcon:c=!0}){let d={Pagado:{className:"bg-green-500/10 text-green-400 border-green-500/20",icon:q.CheckCircle},Parcial:{className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",icon:r.Clock},Pendiente:{className:"bg-orange-500/10 text-orange-400 border-orange-500/20",icon:s.AlertCircle},Vencido:{className:"bg-red-500/10 text-red-400 border-red-500/20",icon:t.AlertTriangle}}[a],e=d.icon;return(0,b.jsxs)(h.Badge,{className:`${d.className} font-medium text-xs`,children:[c&&(0,b.jsx)(e,{className:"h-3 w-3 mr-1"}),a]})}var v=a.i(65733),w=a.i(40695),x=a.i(5522),y=a.i(17171),z=a.i(87682),A=a.i(46893),B=a.i(77687);function C(a){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(a)}function D(a){return new Date(a).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}var E=a.i(90166),F=a.i(73320);function G({open:a,onOpenChange:d,sale:e,onPaymentRegistered:f}){let{toast:g}=(0,B.useToast)(),[h,i]=(0,c.useState)("Efectivo"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(new Date().toISOString().split("T")[0]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,t]=(0,c.useState)({}),[u,D]=(0,c.useState)({efectivo:0,tarjeta:0,transferencia:0,mercadoPago:0,deposito:0});(0,c.useEffect)(()=>{a||(i("Efectivo"),k(""),m(new Date().toISOString().split("T")[0]),o(""),q(""),D({efectivo:0,tarjeta:0,transferencia:0,mercadoPago:0,deposito:0}),t({}))},[a]);let G=u.efectivo+u.tarjeta+u.transferencia+u.mercadoPago+u.deposito;return e?(0,b.jsx)(v.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(v.DialogContent,{className:"bg-slate-900 border-slate-800 text-slate-100 max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(v.DialogHeader,{children:(0,b.jsx)(v.DialogTitle,{className:"text-slate-100 text-xl",children:"Registrar Pago"})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Cliente"}),(0,b.jsx)("div",{className:"font-medium text-slate-200",children:e.cliente})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Orden"}),(0,b.jsx)("div",{className:"font-mono text-indigo-400",children:e.folioOS})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Equipo"}),(0,b.jsx)("div",{className:"font-medium text-slate-200",children:e.equipo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Sucursal"}),(0,b.jsx)("div",{className:"font-medium text-slate-200",children:e.sucursal})]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t border-slate-700 grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Total"}),(0,b.jsx)("div",{className:"text-lg font-bold text-slate-100",children:C(e.total)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Pagado"}),(0,b.jsx)("div",{className:"text-lg font-bold text-green-400",children:C(e.pagado)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-slate-500 text-xs",children:"Saldo"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:C(e.saldo)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"monto",className:"text-slate-200",children:["Monto a pagar ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(E.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),(0,b.jsx)(x.Input,{id:"monto",type:"number",step:"0.01",value:j,onChange:a=>k(a.target.value),className:`pl-10 bg-slate-800 border-slate-700 text-slate-100 ${r.monto?"border-red-500":""}`,placeholder:"0.00"})]}),r.monto&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(s.AlertCircle,{className:"h-3 w-3"}),r.monto]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"metodoPago",className:"text-slate-200",children:["Método de pago ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)(z.Select,{value:h,onValueChange:a=>i(a),children:[(0,b.jsx)(z.SelectTrigger,{className:"bg-slate-800 border-slate-700 text-slate-100",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsxs)(z.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,b.jsx)(z.SelectItem,{value:"Efectivo",className:"text-slate-300",children:"Efectivo"}),(0,b.jsx)(z.SelectItem,{value:"Tarjeta",className:"text-slate-300",children:"Tarjeta"}),(0,b.jsx)(z.SelectItem,{value:"Transferencia",className:"text-slate-300",children:"Transferencia"}),(0,b.jsx)(z.SelectItem,{value:"MercadoPago",className:"text-slate-300",children:"MercadoPago"}),(0,b.jsx)(z.SelectItem,{value:"Depósito",className:"text-slate-300",children:"Depósito"}),(0,b.jsx)(z.SelectItem,{value:"Mixto",className:"text-slate-300",children:"Pago Mixto"})]})]})]}),"Mixto"===h&&(0,b.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(y.Label,{className:"text-slate-200 font-semibold",children:"Desglose de Pago Mixto"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Total: "}),(0,b.jsx)("span",{className:`font-bold ${G===parseFloat(j||"0")?"text-green-400":"text-yellow-400"}`,children:C(G)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Label,{className:"text-slate-300 text-xs",children:"Efectivo"}),(0,b.jsx)(x.Input,{type:"number",step:"0.01",value:u.efectivo||"",onChange:a=>D({...u,efectivo:parseFloat(a.target.value)||0}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Label,{className:"text-slate-300 text-xs",children:"Tarjeta"}),(0,b.jsx)(x.Input,{type:"number",step:"0.01",value:u.tarjeta||"",onChange:a=>D({...u,tarjeta:parseFloat(a.target.value)||0}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Label,{className:"text-slate-300 text-xs",children:"Transferencia"}),(0,b.jsx)(x.Input,{type:"number",step:"0.01",value:u.transferencia||"",onChange:a=>D({...u,transferencia:parseFloat(a.target.value)||0}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Label,{className:"text-slate-300 text-xs",children:"MercadoPago"}),(0,b.jsx)(x.Input,{type:"number",step:"0.01",value:u.mercadoPago||"",onChange:a=>D({...u,mercadoPago:parseFloat(a.target.value)||0}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(y.Label,{className:"text-slate-300 text-xs",children:"Depósito"}),(0,b.jsx)(x.Input,{type:"number",step:"0.01",value:u.deposito||"",onChange:a=>D({...u,deposito:parseFloat(a.target.value)||0}),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"0.00"})]})]}),r.mixedPayment&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(s.AlertCircle,{className:"h-3 w-3"}),r.mixedPayment]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"fecha",className:"text-slate-200",children:["Fecha del pago ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(x.Input,{id:"fecha",type:"date",value:l,onChange:a=>m(a.target.value),className:`bg-slate-800 border-slate-700 text-slate-100 ${r.fecha?"border-red-500":""}`}),r.fecha&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(s.AlertCircle,{className:"h-3 w-3"}),r.fecha]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"referencia",className:"text-slate-200",children:"Referencia / Folio"}),(0,b.jsx)(x.Input,{id:"referencia",value:n,onChange:a=>o(a.target.value),className:"bg-slate-800 border-slate-700 text-slate-100",placeholder:"Número de transacción, folio, etc."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"notas",className:"text-slate-200",children:"Notas"}),(0,b.jsx)(A.Textarea,{id:"notas",value:p,onChange:a=>q(a.target.value),className:"bg-slate-800 border-slate-700 text-slate-100 min-h-[80px]",placeholder:"Comentarios adicionales..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{className:"text-slate-200",children:"Comprobante (opcional)"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-slate-700 rounded-lg p-4 text-center hover:border-slate-600 transition-colors cursor-pointer",children:[(0,b.jsx)(F.Upload,{className:"h-8 w-8 text-slate-500 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Arrastra un archivo o haz clic para seleccionar"}),(0,b.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"PDF o imagen (máx. 5MB)"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:()=>d(!1),className:"border-slate-700 text-slate-300 hover:bg-slate-800",children:"Cancelar"}),(0,b.jsxs)(w.Button,{onClick:()=>{(()=>{let a={};if("Mixto"===h){let e=parseFloat(j)||0;if(e<=0)a.monto="El monto debe ser mayor a 0";else{var b,c,d,f;b=u.efectivo,c=u.tarjeta,d=u.transferencia,f=u.mercadoPago,.01>Math.abs(b+c+d+f+u.deposito-e)||(a.mixedPayment=`La suma debe ser exactamente ${C(e)}`)}}else{let b=parseFloat(j);!j||b<=0?a.monto="El monto debe ser mayor a 0":e&&b>e.saldo&&(a.monto=`El monto no puede exceder el saldo de ${C(e.saldo)}`)}return l?new Date(l)>new Date&&(a.fecha="La fecha no puede ser futura"):a.fecha="La fecha es requerida",t(a),0===Object.keys(a).length})()&&(g({title:"Pago registrado",description:`Se registr\xf3 un pago de ${C(parseFloat(j))} correctamente.`}),f?.(),d(!1))},className:"bg-green-600 hover:bg-green-500 text-white",children:[(0,b.jsx)(E.DollarSign,{className:"h-4 w-4 mr-2"}),"Registrar Pago"]})]})]})]})}):null}var H=a.i(3130),I=a.i(88237),J=a.i(87532),K=a.i(77156),L=a.i(24669);let M=[{id:"pay-001",ordenServicioId:"os-001",folioOS:"RS-OS-1024",monto:2500,metodoPago:"Efectivo",fecha:"2025-01-20T10:30:00Z",referencia:"",usuarioRegistro:"user-001",nombreUsuario:"Ana Martínez",sucursal:"Sede A"},{id:"pay-002",ordenServicioId:"os-002",folioOS:"RS-OS-1023",monto:1e3,metodoPago:"Tarjeta",fecha:"2025-01-19T14:15:00Z",referencia:"VISA-****1234",usuarioRegistro:"user-002",nombreUsuario:"Carlos Gómez",sucursal:"Sede A"},{id:"pay-003",ordenServicioId:"os-002",folioOS:"RS-OS-1023",monto:600,metodoPago:"Mixto",mixedBreakdown:{efectivo:400,tarjeta:200,transferencia:0,mercadoPago:0,deposito:0},fecha:"2025-01-20T16:45:00Z",notas:"Pago parcial - cliente solicitó dividir",usuarioRegistro:"user-001",nombreUsuario:"Ana Martínez",sucursal:"Sede A"},{id:"pay-004",ordenServicioId:"os-004",folioOS:"RS-OS-1021",monto:1500,metodoPago:"Transferencia",fecha:"2025-01-18T11:20:00Z",referencia:"SPEI-987654321",comprobante:"/comprobantes/pay-004.pdf",usuarioRegistro:"user-003",nombreUsuario:"Luis Torres",sucursal:"Sede B"},{id:"pay-005",ordenServicioId:"os-005",folioOS:"RS-OS-1020",monto:800,metodoPago:"MercadoPago",fecha:"2025-01-17T09:30:00Z",referencia:"MP-123456789",usuarioRegistro:"user-001",nombreUsuario:"Ana Martínez",sucursal:"Sede A"}],N=[{id:"os-001",ordenServicioId:"os-001",folioOS:"RS-OS-1024",cliente:"Juan Pérez García",clienteEmail:"juan.perez@email.com",clienteTelefono:"+52 55 1234 5678",equipo:"Laptop HP Pavilion 15",equipoMarca:"HP",equipoModelo:"Pavilion 15-au123la",sucursal:"Sede A",fechaCreacion:"2025-01-18T08:00:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-LIMP-PROFUNDA",nombre:"Limpieza Profunda con Pasta Térmica",cantidad:1,precioUnitario:350,costoUnitario:50,subtotal:350},{tipo:"Servicio",catalogoSKU:"SRV-FORMAT-INSTALL",nombre:"Formateo e Instalación de Sistema Operativo",cantidad:1,precioUnitario:450,costoUnitario:0,subtotal:450},{tipo:"Refacción",catalogoSKU:"RAM-DDR4-8GB-2666",nombre:"Memoria RAM DDR4 8GB 2666MHz",cantidad:2,precioUnitario:850,costoUnitario:620,subtotal:1700}],subtotal:2500,descuento:0,total:2500,pagado:2500,saldo:0,utilidad:1260,estado:"Pagado",pagos:[M[0]],ultimoPago:{fecha:"2025-01-20T10:30:00Z",metodo:"Efectivo"},tecnicoAsignado:"Carlos Gómez"},{id:"os-002",ordenServicioId:"os-002",folioOS:"RS-OS-1023",cliente:"María González López",clienteEmail:"maria.gonzalez@email.com",clienteTelefono:"+52 55 8765 4321",equipo:"Laptop Dell Inspiron 15",equipoMarca:"Dell",equipoModelo:"Inspiron 15 5000",sucursal:"Sede A",fechaCreacion:"2025-01-17T10:30:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-CAMBIO-PANTALLA",nombre:"Cambio de Pantalla",cantidad:1,precioUnitario:400,costoUnitario:0,subtotal:400},{tipo:"Refacción",catalogoSKU:"PANT-15.6-FHD",nombre:'Pantalla 15.6" FHD',cantidad:1,precioUnitario:2800,costoUnitario:2100,subtotal:2800}],subtotal:3200,descuento:0,total:3200,pagado:1600,saldo:1600,utilidad:1100,estado:"Parcial",pagos:[M[1],M[2]],ultimoPago:{fecha:"2025-01-20T16:45:00Z",metodo:"Mixto"},tecnicoAsignado:"Ana Martínez"},{id:"os-003",ordenServicioId:"os-003",folioOS:"RS-OS-1022",cliente:"Pedro Ramírez Sánchez",clienteEmail:"pedro.ramirez@email.com",clienteTelefono:"+52 55 5555 1234",equipo:"Desktop HP Compaq",equipoMarca:"HP",equipoModelo:"Compaq Elite 8300",sucursal:"Sede B",fechaCreacion:"2025-01-16T14:00:00Z",fechaVencimiento:"2025-01-23T14:00:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-DIAG-GENERAL",nombre:"Diagnóstico General Completo",cantidad:1,precioUnitario:200,costoUnitario:0,subtotal:200},{tipo:"Servicio",catalogoSKU:"SRV-UPGRADE-SSD",nombre:"Upgrade a SSD con Clonación",cantidad:1,precioUnitario:500,costoUnitario:0,subtotal:500},{tipo:"Refacción",catalogoSKU:"SSD-256GB-SATA",nombre:"SSD 256GB SATA III",cantidad:1,precioUnitario:1250,costoUnitario:890,subtotal:1250}],subtotal:1950,descuento:150,total:1800,pagado:0,saldo:1800,utilidad:910,estado:"Pendiente",pagos:[],tecnicoAsignado:"Luis Torres",notas:"Cliente solicitó descuento por ser cliente frecuente"},{id:"os-004",ordenServicioId:"os-004",folioOS:"RS-OS-1021",cliente:"Laura Martínez Díaz",clienteEmail:"laura.martinez@email.com",clienteTelefono:"+52 55 9876 5432",equipo:"Laptop Lenovo ThinkPad",equipoMarca:"Lenovo",equipoModelo:"ThinkPad T480",sucursal:"Sede B",fechaCreacion:"2025-01-15T09:00:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-CAMBIO-BATERIA",nombre:"Cambio de Batería",cantidad:1,precioUnitario:250,costoUnitario:0,subtotal:250},{tipo:"Refacción",catalogoSKU:"BATT-DELL-INSPIRON",nombre:"Batería Dell Inspiron",cantidad:1,precioUnitario:1380,costoUnitario:980,subtotal:1380}],subtotal:1630,descuento:130,total:1500,pagado:1500,saldo:0,utilidad:520,estado:"Pagado",pagos:[M[3]],ultimoPago:{fecha:"2025-01-18T11:20:00Z",metodo:"Transferencia"},tecnicoAsignado:"Carlos Gómez"},{id:"os-005",ordenServicioId:"os-005",folioOS:"RS-OS-1020",cliente:"Roberto Silva Torres",clienteEmail:"roberto.silva@email.com",clienteTelefono:"+52 55 1111 2222",equipo:"Laptop Asus VivoBook",equipoMarca:"Asus",equipoModelo:"VivoBook 15",sucursal:"Sede A",fechaCreacion:"2025-01-14T11:30:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-ELIMINACION-VIRUS",nombre:"Eliminación de Virus y Malware",cantidad:1,precioUnitario:300,costoUnitario:0,subtotal:300},{tipo:"Servicio",catalogoSKU:"SRV-UPGRADE-RAM",nombre:"Upgrade de Memoria RAM",cantidad:1,precioUnitario:150,costoUnitario:0,subtotal:150},{tipo:"Refacción",catalogoSKU:"RAM-DDR4-8GB-2666",nombre:"Memoria RAM DDR4 8GB 2666MHz",cantidad:1,precioUnitario:850,costoUnitario:620,subtotal:850}],subtotal:1300,descuento:0,total:1300,pagado:800,saldo:500,utilidad:680,estado:"Parcial",pagos:[M[4]],ultimoPago:{fecha:"2025-01-17T09:30:00Z",metodo:"MercadoPago"},tecnicoAsignado:"Ana Martínez"},{id:"os-006",ordenServicioId:"os-006",folioOS:"RS-OS-1019",cliente:"Carmen Rodríguez Vega",clienteEmail:"carmen.rodriguez@email.com",equipo:"Desktop Custom Build",sucursal:"Sede C",fechaCreacion:"2025-01-10T15:00:00Z",fechaVencimiento:"2025-01-17T15:00:00Z",conceptos:[{tipo:"Servicio",catalogoSKU:"SRV-RECUPERACION-DATOS",nombre:"Recuperación de Datos",cantidad:1,precioUnitario:800,costoUnitario:0,subtotal:800}],subtotal:800,descuento:0,total:800,pagado:0,saldo:800,utilidad:800,estado:"Vencido",pagos:[],tecnicoAsignado:"Luis Torres",notas:"Cliente no ha respondido llamadas"}];function O(){let{hasPermission:a,user:h}=(0,f.useAuth)(),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("all"),[m,n]=(0,c.useState)("all"),[o,q]=(0,c.useState)(!1),[t,v]=(0,c.useState)(null);if(!a("ventas"))return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.DashboardHeader,{title:"Ventas y Pagos"}),(0,b.jsx)(g.AccessDenied,{})]});let y=h?.role==="Administrador"||h?.role==="Recepción",A=h?.role==="Administrador",B=(0,c.useMemo)(()=>N.filter(a=>{let b=a.folioOS.toLowerCase().includes(i.toLowerCase())||a.cliente.toLowerCase().includes(i.toLowerCase())||a.equipo.toLowerCase().includes(i.toLowerCase()),c="all"===k||a.sucursal===k,d="all"===m||a.estado===m;return b&&c&&d}),[i,k,m]),F=(0,c.useMemo)(()=>{let a=N.reduce((a,b)=>a+b.pagado,0),b=N.reduce((a,b)=>a+b.saldo,0),c=N.reduce((a,b)=>a+b.total,0),d=N.reduce((a,b)=>a+(b.utilidad||0),0),e=new Date().toISOString().split("T")[0];return{cobrado:a,porCobrar:b,totalVentas:c,utilidad:d,pagosHoy:N.filter(a=>a.ultimoPago?.fecha===e).length,vencidas:N.filter(a=>a.saldo>0&&a.fechaVencimiento&&a.fechaVencimiento<e).length}},[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.DashboardHeader,{title:"Ventas y Pagos"}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:(0,b.jsxs)("div",{className:"max-w-[1600px] mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-green-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500/10 to-transparent rounded-full blur-2xl group-hover:from-green-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Cobrado"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-500/10 ring-1 ring-green-500/20",children:(0,b.jsx)(E.DollarSign,{className:"h-4 w-4 text-green-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:C(F.cobrado)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:"Total pagado"})]})]}),(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-yellow-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-500/10 to-transparent rounded-full blur-2xl group-hover:from-yellow-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Por Cobrar"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-yellow-500/10 ring-1 ring-yellow-500/20",children:(0,b.jsx)(r.Clock,{className:"h-4 w-4 text-yellow-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:C(F.porCobrar)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:"Saldo pendiente"})]})]}),(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-indigo-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-500/10 to-transparent rounded-full blur-2xl group-hover:from-indigo-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Total Ventas"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-indigo-500/10 ring-1 ring-indigo-500/20",children:(0,b.jsx)(L.TrendingUp,{className:"h-4 w-4 text-indigo-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:C(F.totalVentas)}),(0,b.jsxs)("div",{className:"text-xs text-slate-500 font-medium",children:[N.length," órdenes"]})]})]}),A&&(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-purple-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-transparent rounded-full blur-2xl group-hover:from-purple-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Utilidad"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/10 ring-1 ring-purple-500/20",children:(0,b.jsx)(L.TrendingUp,{className:"h-4 w-4 text-purple-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:C(F.utilidad)}),(0,b.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:"Ganancia neta"})]})]}),(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-blue-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500/10 to-transparent rounded-full blur-2xl group-hover:from-blue-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Pagos Hoy"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/10 ring-1 ring-blue-500/20",children:(0,b.jsx)(E.DollarSign,{className:"h-4 w-4 text-blue-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:F.pagosHoy}),(0,b.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:"Registrados"})]})]}),(0,b.jsxs)(H.Card,{className:"relative overflow-hidden bg-slate-900/60 backdrop-blur-sm border-white/5 p-5 hover:bg-slate-900/80 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-red-500/10 group cursor-pointer",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-red-500/10 to-transparent rounded-full blur-2xl group-hover:from-red-500/20 transition-all duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("div",{className:"text-slate-400 text-xs font-medium uppercase tracking-wide",children:"Vencidas"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-red-500/10 ring-1 ring-red-500/20",children:(0,b.jsx)(s.AlertCircle,{className:"h-4 w-4 text-red-400"})})]}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-100 mb-1",children:F.vencidas}),(0,b.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:"Requieren atención"})]})]})]}),(0,b.jsxs)(H.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5",children:[(0,b.jsx)("div",{className:"p-6 border-b border-white/5",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(J.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),(0,b.jsx)(x.Input,{placeholder:"Buscar por folio, cliente o equipo...",value:i,onChange:a=>j(a.target.value),className:"pl-10 bg-slate-800/40 border-slate-700 text-slate-100 placeholder:text-slate-500 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(z.Select,{value:k,onValueChange:l,children:[(0,b.jsx)(z.SelectTrigger,{className:"h-9 w-[140px] bg-slate-800/40 border-slate-700 text-slate-300 text-xs",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsxs)(z.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,b.jsx)(z.SelectItem,{value:"all",className:"text-slate-300 text-xs",children:"Todas las sucursales"}),(0,b.jsx)(z.SelectItem,{value:"Sede A",className:"text-slate-300 text-xs",children:"Sede A"}),(0,b.jsx)(z.SelectItem,{value:"Sede B",className:"text-slate-300 text-xs",children:"Sede B"}),(0,b.jsx)(z.SelectItem,{value:"Sede C",className:"text-slate-300 text-xs",children:"Sede C"})]})]}),(0,b.jsxs)(z.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(z.SelectTrigger,{className:"h-9 w-[140px] bg-slate-800/40 border-slate-700 text-slate-300 text-xs",children:(0,b.jsx)(z.SelectValue,{})}),(0,b.jsxs)(z.SelectContent,{className:"bg-slate-900 border-slate-700",children:[(0,b.jsx)(z.SelectItem,{value:"all",className:"text-slate-300 text-xs",children:"Todos los estados"}),(0,b.jsx)(z.SelectItem,{value:"Pagado",className:"text-slate-300 text-xs",children:"Pagado"}),(0,b.jsx)(z.SelectItem,{value:"Parcial",className:"text-slate-300 text-xs",children:"Parcial"}),(0,b.jsx)(z.SelectItem,{value:"Pendiente",className:"text-slate-300 text-xs",children:"Pendiente"}),(0,b.jsx)(z.SelectItem,{value:"Vencido",className:"text-slate-300 text-xs",children:"Vencido"})]})]})]})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(I.Table,{children:[(0,b.jsx)(I.TableHeader,{children:(0,b.jsxs)(I.TableRow,{className:"border-white/5 hover:bg-transparent",children:[(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Folio OS"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Cliente"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Equipo"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Sucursal"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Fecha"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Total"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Pagado"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Saldo"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Estado"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Último Pago"}),(0,b.jsx)(I.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Acciones"})]})}),(0,b.jsx)(I.TableBody,{children:B.map((a,c)=>(0,b.jsxs)(I.TableRow,{className:"border-white/5 hover:bg-white/[0.02] text-slate-300 transition-all duration-150",style:{animation:"fadeInUp 0.3s ease-out forwards",animationDelay:`${30*c}ms`,opacity:0},children:[(0,b.jsx)(I.TableCell,{className:"font-mono text-[12px] text-indigo-400",children:a.folioOS}),(0,b.jsx)(I.TableCell,{className:"text-[13px]",children:a.cliente}),(0,b.jsx)(I.TableCell,{className:"text-[12px] text-slate-400",children:a.equipo}),(0,b.jsx)(I.TableCell,{className:"text-[12px] text-slate-400",children:a.sucursal}),(0,b.jsx)(I.TableCell,{className:"text-[12px] text-slate-400",children:D(a.fechaCreacion)}),(0,b.jsx)(I.TableCell,{className:"text-right text-[13px] font-semibold text-slate-200",children:C(a.total)}),(0,b.jsx)(I.TableCell,{className:"text-right text-[13px] font-semibold text-green-400",children:C(a.pagado)}),(0,b.jsx)(I.TableCell,{className:"text-right text-[13px] font-semibold text-yellow-400",children:C(a.saldo)}),(0,b.jsx)(I.TableCell,{children:(0,b.jsx)(u,{estado:a.estado})}),(0,b.jsx)(I.TableCell,{children:a.ultimoPago?(0,b.jsxs)("div",{className:"text-[11px]",children:[(0,b.jsx)("div",{className:"text-slate-400",children:D(a.ultimoPago.fecha)}),(0,b.jsx)(p,{metodo:a.ultimoPago.metodo})]}):(0,b.jsx)("span",{className:"text-[11px] text-slate-600",children:"—"})}),(0,b.jsx)(I.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(d.default,{href:`/dashboard/ventas/${a.folioOS}`,children:(0,b.jsx)(w.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10",title:"Ver detalles",children:(0,b.jsx)(K.Eye,{className:"h-3.5 w-3.5"})})}),y&&a.saldo>0&&(0,b.jsxs)(w.Button,{size:"sm",variant:"ghost",onClick:()=>{v(a),q(!0)},className:"h-7 px-2 text-slate-400 hover:text-green-400 hover:bg-green-500/10 text-xs",title:"Registrar pago",children:[(0,b.jsx)(E.DollarSign,{className:"h-3.5 w-3.5 mr-1"}),"Pagar"]})]})})]},a.id))})]})}),B.length>0&&(0,b.jsx)("div",{className:"border-t border-white/5 px-6 py-4",children:(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["Mostrando ",(0,b.jsx)("span",{className:"font-semibold text-slate-400",children:B.length})," ventas"]})})]})]})}),(0,b.jsx)(G,{open:o,onOpenChange:q,sale:t,onPaymentRegistered:()=>{console.log("Pago registrado exitosamente")}})]})}a.s(["default",()=>O],97064)}];

//# sourceMappingURL=app_dashboard_ventas_page_tsx_e8d21d9c._.js.map