module.exports=[846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(69265),f=a.i(21937),g=a.i(32335),h=a.i(52e3),i=a.i(95804),j=a.i(54161),k=a.i(15618),l=a.i(23025),m=a.i(19256),n=a.i(43108),o=a.i(21161),p=a.i(81560);function q({tipo:a,showIcon:c=!0}){let d={Entrada:{className:"bg-green-500/10 text-green-400 border-green-500/20",icon:k.Plus,label:"Entrada"},Salida:{className:"bg-red-500/10 text-red-400 border-red-500/20",icon:l.Minus,label:"Salida"},Transferencia:{className:"bg-blue-500/10 text-blue-400 border-blue-500/20",icon:m.ArrowLeftRight,label:"Transferencia"},"Reserva OS":{className:"bg-purple-500/10 text-purple-400 border-purple-500/20",icon:n.Lock,label:"Reserva OS"},Ajuste:{className:"bg-amber-500/10 text-amber-400 border-amber-500/20",icon:o.Settings,label:"Ajuste"},Merma:{className:"bg-orange-500/10 text-orange-400 border-orange-500/20",icon:p.Trash2,label:"Merma"}}[a],e=d.icon;return(0,b.jsxs)(j.Badge,{className:`${d.className} font-medium text-xs`,children:[c&&(0,b.jsx)(e,{className:"h-3 w-3 mr-1"}),d.label]})}var r=a.i(3130),s=a.i(40695),t=a.i(88237),u=a.i(21958),v=a.i(210),w=a.i(83497),x=a.i(67900),y=a.i(90166),z=a.i(24987),A=a.i(41675),B=a.i(24569),C=a.i(38784);let D=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var E=a.i(46842),F=a.i(4720),G=a.i(15184),H=a.i(98555);function I(){let a=(0,d.useParams)(),k=(0,d.useRouter)(),{hasPermission:l,user:p}=(0,f.useAuth)(),[I,J]=(0,c.useState)("info"),K=a.sku,L=(0,G.getProductBySku)(K),M=(0,G.getMovementsBySku)(K),N=(0,G.getReservationsBySku)(K);if(!l("inventario"))return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.DashboardHeader,{title:"Detalle de Producto"}),(0,b.jsx)(g.AccessDenied,{})]});if(!L)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.DashboardHeader,{title:"Detalle de Producto"}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto p-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsx)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,b.jsx)(w.Package,{className:"h-16 w-16 text-slate-700 mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-300 mb-2",children:"Producto no encontrado"}),(0,b.jsxs)("p",{className:"text-slate-500 mb-6",children:['El SKU "',K,'" no existe en el inventario']}),(0,b.jsxs)(s.Button,{onClick:()=>k.push("/dashboard/inventario"),className:"bg-indigo-600 hover:bg-indigo-500",children:[(0,b.jsx)(v.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver al inventario"]})]})})})})]});let O=p?.role==="Técnico",P=(0,H.getStockStatus)(L.stockTotal,L.stockMinimo),Q=(0,H.calculateAvailableStock)(L.stockTotal,L.stockReservado);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.DashboardHeader,{title:"Detalle de Producto"}),(0,b.jsxs)("main",{className:"flex-1 overflow-y-auto p-8 relative",children:[(0,b.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-20",children:[(0,b.jsx)("div",{className:"absolute top-[-10%] right-[-5%] w-[600px] h-[600px] rounded-full bg-gradient-to-br from-indigo-600/30 to-transparent blur-3xl animate-blob-slow"}),(0,b.jsx)("div",{className:"absolute bottom-[-15%] left-[-10%] w-[700px] h-[700px] rounded-full bg-gradient-to-tr from-violet-600/30 to-transparent blur-3xl animate-blob-slower"})]}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6 relative z-10",children:[(0,b.jsx)("div",{className:"animate-fade-in-up",children:(0,b.jsxs)(s.Button,{variant:"ghost",onClick:()=>k.push("/dashboard/inventario"),className:"text-slate-400 hover:text-slate-300 hover:bg-white/5",children:[(0,b.jsx)(v.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver al inventario"]})}),(0,b.jsx)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-8 animate-fade-in-up",style:{animationDelay:"100ms"},children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(i.ProductThumbnail,{categoria:L.categoria,imagen:L.imagen,nombre:L.nombre,size:"lg"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:L.nombre}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsx)(j.Badge,{className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20 font-mono text-xs",children:L.sku}),(0,b.jsx)(j.Badge,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20 text-xs",children:L.categoria}),(0,b.jsx)(h.StockBadge,{status:P})]})]}),!O&&(0,b.jsxs)(s.Button,{className:"bg-indigo-600 hover:bg-indigo-500",children:[(0,b.jsx)(B.Edit,{className:"h-4 w-4 mr-2"}),"Editar"]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Stock Total"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-slate-100",children:L.stockTotal})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Reservado"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:L.stockReservado})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Disponible"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:Q})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Stock Mínimo"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:L.stockMinimo})]})]}),L.marca&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Marca:"}),(0,b.jsx)("span",{className:"text-slate-300 font-medium",children:L.marca})]}),L.compatibilidad&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Compatibilidad:"}),(0,b.jsx)("span",{className:"text-slate-300",children:L.compatibilidad})]}),L.especificaciones&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Especificaciones:"}),(0,b.jsx)("span",{className:"text-slate-300",children:L.especificaciones})]})]})]})}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 animate-fade-in-up",style:{animationDelay:"200ms"},children:[(0,b.jsxs)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(x.Building2,{className:"h-5 w-5 text-indigo-400"}),"Stock por Sucursal"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/40 border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-indigo-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-300",children:"Sede A"})]}),(0,b.jsx)("span",{className:"text-lg font-bold text-slate-100",children:L.stockPorSucursal.sedeA})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/40 border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-300",children:"Sede B"})]}),(0,b.jsx)("span",{className:"text-lg font-bold text-slate-100",children:L.stockPorSucursal.sedeB})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/40 border border-slate-700/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-purple-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-300",children:"Sede C"})]}),(0,b.jsx)("span",{className:"text-lg font-bold text-slate-100",children:L.stockPorSucursal.sedeC})]})]})]}),(0,b.jsxs)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-100 mb-4 flex items-center gap-2",children:[(0,b.jsx)(y.DollarSign,{className:"h-5 w-5 text-green-400"}),"Precios y Ubicación"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Precio de Venta"}),(0,b.jsx)("span",{className:"text-xl font-bold text-green-400",children:(0,H.formatCurrency)(L.precioVenta)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Costo Proveedor"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-slate-300",children:(0,H.formatCurrency)(L.costoProveedor)})]}),(0,b.jsx)("div",{className:"h-px bg-slate-700/50"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Margen"}),(0,b.jsx)("span",{className:"text-lg font-semibold text-indigo-400",children:(0,H.formatCurrency)(L.precioVenta-L.costoProveedor)})]}),(0,b.jsx)("div",{className:"h-px bg-slate-700/50"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.MapPin,{className:"h-4 w-4 text-slate-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Ubicación:"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-300",children:L.ubicacion})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Calendar,{className:"h-4 w-4 text-slate-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Último movimiento:"}),(0,b.jsx)("span",{className:"text-sm font-medium text-slate-300",children:(0,H.formatRelativeTime)(L.ultimoMovimiento)})]})]})]})]}),!O&&(0,b.jsx)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 p-6 animate-fade-in-up",style:{animationDelay:"300ms"},children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)(s.Button,{className:"bg-indigo-600 hover:bg-indigo-500",children:[(0,b.jsx)(o.Settings,{className:"h-4 w-4 mr-2"}),"Ajustar Stock"]}),(0,b.jsxs)(s.Button,{className:"bg-blue-600 hover:bg-blue-500",children:[(0,b.jsx)(m.ArrowLeftRight,{className:"h-4 w-4 mr-2"}),"Transferir"]}),(0,b.jsxs)(s.Button,{className:"bg-green-600 hover:bg-green-500",children:[(0,b.jsx)(C.ShoppingCart,{className:"h-4 w-4 mr-2"}),"Generar Orden de Compra"]}),(0,b.jsxs)(s.Button,{variant:"outline",className:"border-slate-700 text-slate-300 hover:bg-white/5",children:[(0,b.jsx)(D,{className:"h-4 w-4 mr-2"}),"Exportar Historial"]})]})}),(0,b.jsx)(r.Card,{className:"bg-slate-900/60 backdrop-blur-sm border-white/5 animate-fade-in-up overflow-hidden",style:{animationDelay:"400ms"},children:(0,b.jsxs)(u.Tabs,{value:I,onValueChange:J,className:"w-full",children:[(0,b.jsx)("div",{className:"border-b border-white/5 px-6",children:(0,b.jsxs)(u.TabsList,{className:"bg-transparent border-0 h-auto p-0",children:[(0,b.jsx)(u.TabsTrigger,{value:"info",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-indigo-500 rounded-none px-4 py-3 text-slate-400 data-[state=active]:text-indigo-400",children:"Movimientos del Inventario"}),(0,b.jsxs)(u.TabsTrigger,{value:"reservations",className:"data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-purple-500 rounded-none px-4 py-3 text-slate-400 data-[state=active]:text-purple-400",children:["Reservas Activas (",N.length,")"]})]})}),(0,b.jsx)(u.TabsContent,{value:"info",className:"m-0 p-0",children:(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{className:"border-white/5 hover:bg-transparent",children:[(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Fecha"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Tipo"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-center",children:"Cantidad"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Usuario"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Sucursal"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"OS Relacionada"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Notas"})]})}),(0,b.jsx)(t.TableBody,{children:M.map((a,c)=>(0,b.jsxs)(t.TableRow,{className:"border-white/5 hover:bg-white/[0.02] text-slate-300 transition-all duration-150",style:{animation:"fadeInUp 0.3s ease-out forwards",animationDelay:`${30*c}ms`,opacity:0},children:[(0,b.jsx)(t.TableCell,{className:"text-[12px] text-slate-400",children:(0,H.formatDate)(a.fecha)}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(q,{tipo:a.tipo})}),(0,b.jsx)(t.TableCell,{className:"text-center",children:(0,b.jsxs)("span",{className:`text-[13px] font-semibold ${a.cantidad>0?"text-green-400":"text-red-400"}`,children:[a.cantidad>0?"+":"",a.cantidad]})}),(0,b.jsx)(t.TableCell,{className:"text-[13px] text-slate-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.User,{className:"h-3 w-3 text-slate-500"}),a.usuario]})}),(0,b.jsx)(t.TableCell,{className:"text-[13px] text-slate-400",children:a.sucursal}),(0,b.jsx)(t.TableCell,{children:a.ordenServicioId?(0,b.jsx)(j.Badge,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20 font-mono text-[11px]",children:a.ordenServicioId}):(0,b.jsx)("span",{className:"text-[12px] text-slate-600",children:"—"})}),(0,b.jsx)(t.TableCell,{className:"text-[12px] text-slate-500 max-w-xs truncate",children:a.notas||"—"})]},a.id))})]}),0===M.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(F.FileText,{className:"h-12 w-12 text-slate-700 mb-3"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"No hay movimientos registrados para este producto"})]})]})}),(0,b.jsx)(u.TabsContent,{value:"reservations",className:"m-0 p-0",children:(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{className:"border-white/5 hover:bg-transparent",children:[(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Folio OS"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Cliente"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-center",children:"Cantidad"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Sucursal"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Fecha Reserva"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Uso Estimado"}),(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider",children:"Usuario"}),!O&&(0,b.jsx)(t.TableHead,{className:"text-slate-500 text-[11px] font-semibold uppercase tracking-wider text-right",children:"Acción"})]})}),(0,b.jsx)(t.TableBody,{children:N.map((a,c)=>(0,b.jsxs)(t.TableRow,{className:"border-white/5 hover:bg-white/[0.02] text-slate-300 transition-all duration-150",style:{animation:"fadeInUp 0.3s ease-out forwards",animationDelay:`${30*c}ms`,opacity:0},children:[(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(j.Badge,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20 font-mono text-[11px]",children:a.folioOS})}),(0,b.jsx)(t.TableCell,{className:"text-[13px] text-slate-300 font-medium",children:a.cliente}),(0,b.jsx)(t.TableCell,{className:"text-center",children:(0,b.jsx)("span",{className:"text-[13px] font-semibold text-purple-400",children:a.cantidadReservada})}),(0,b.jsx)(t.TableCell,{className:"text-[13px] text-slate-400",children:a.sucursal}),(0,b.jsx)(t.TableCell,{className:"text-[12px] text-slate-400",children:(0,H.formatDate)(a.fechaReserva)}),(0,b.jsx)(t.TableCell,{className:"text-[12px] text-slate-400",children:(0,H.formatDate)(a.fechaEstimadaUso)}),(0,b.jsx)(t.TableCell,{className:"text-[13px] text-slate-400",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.User,{className:"h-3 w-3 text-slate-500"}),a.usuario]})}),!O&&(0,b.jsx)(t.TableCell,{className:"text-right",children:(0,b.jsx)(s.Button,{size:"sm",variant:"ghost",className:"h-7 text-xs text-red-400 hover:text-red-300 hover:bg-red-500/10",children:"Liberar"})})]},a.id))})]}),0===N.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(n.Lock,{className:"h-12 w-12 text-slate-700 mb-3"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"No hay reservas activas para este producto"})]})]})})]})})]})]})]})}a.s(["default",()=>I],846)}];

//# sourceMappingURL=app_dashboard_inventario_%5Bsku%5D_page_tsx_3f0269f9._.js.map