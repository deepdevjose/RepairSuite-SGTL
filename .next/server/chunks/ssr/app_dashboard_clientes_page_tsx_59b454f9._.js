module.exports=[79606,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69265),e=a.i(21937),f=a.i(32335),g=a.i(3130),h=a.i(40695),i=a.i(5522),j=a.i(17171),k=a.i(46143),l=a.i(46893),m=a.i(87682),n=a.i(77687),o=a.i(5784),p=a.i(67552),q=a.i(92e3),r=a.i(67453),s=a.i(70106);let t=(0,s.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),u=[{telefono:"5512345678",correo:"juan.perez@email.com",nombre:"Juan Pérez García"},{telefono:"5587654321",correo:"maria.gonzalez@email.com",nombre:"María González López"}];function v({onClose:a,onSave:d,initialData:e}){let{toast:f}=(0,n.useToast)(),[g,s]=(0,c.useState)({nombre1:e?.nombre1||"",middle_name:e?.middle_name||"",apellido_paterno:e?.apellido_paterno||"",apellido_materno:e?.apellido_materno||"",telefono:e?.telefono||"",correo:e?.correo||"",sexo:e?.sexo||"",edad:e?.edad||"",calle:e?.calle||"",numero:e?.numero||"",colonia:e?.colonia||"",municipio:e?.municipio||"",estado:e?.estado||"",pais:e?.pais||"México",rfc:e?.rfc||"",tipo_cliente:e?.tipo_cliente||"",notas_internas:e?.notas_internas||"",activo:e?.activo??!0}),[v,w]=(0,c.useState)({}),[x,y]=(0,c.useState)({personal:!0,direccion:!0,otros:!0}),[z,A]=(0,c.useState)("");return(0,c.useEffect)(()=>{g.rfc&&g.rfc.length>0&&(/^([A-ZÑ&]{3,4})?(\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01]))?([A-Z\d]{2}[A\d])?$/.test(g.rfc.toUpperCase())?w(a=>{let b={...a};return delete b.rfc,b}):w(a=>({...a,rfc:"Formato de RFC inválido"})))},[g.rfc]),(0,c.useEffect)(()=>{if(g.telefono.length>=10||g.correo.includes("@")){let a=u.find(a=>a.telefono===g.telefono||a.correo===g.correo);a?A(`Posible duplicado: ${a.nombre}`):A("")}},[g.telefono,g.correo]),(0,b.jsxs)("form",{onSubmit:b=>{let c;b.preventDefault(),(c={},g.nombre1.trim()||(c.nombre1="El nombre es obligatorio"),g.apellido_paterno.trim()||(c.apellido_paterno="El apellido paterno es obligatorio"),g.telefono.trim()?/^\d{10}$/.test(g.telefono.replace(/\D/g,""))||(c.telefono="El teléfono debe tener 10 dígitos"):c.telefono="El teléfono es obligatorio",g.correo&&!/\S+@\S+\.\S+/.test(g.correo)&&(c.correo="El formato del correo no es válido"),g.edad&&(isNaN(Number(g.edad))||0>Number(g.edad))&&(c.edad="La edad debe ser un número válido"),w(c),0!==Object.keys(c).length)?f({title:"Error de validación",description:"Por favor, corrige los errores antes de continuar.",variant:"destructive"}):(d&&d(g),f({title:"Cliente guardado",description:"Los datos del cliente se han guardado correctamente."}),a())},className:"space-y-6",children:[z&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30 flex items-start gap-3 animate-fade-in",children:[(0,b.jsx)(q.AlertCircle,{className:"h-5 w-5 text-amber-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-200",children:"Cliente potencialmente duplicado"}),(0,b.jsx)("p",{className:"text-xs text-amber-300/80 mt-0.5",children:z})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border border-slate-800/50 rounded-lg p-4 bg-slate-900/30",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y({...x,personal:!x.personal}),className:"flex items-center justify-between w-full text-left group",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-100 group-hover:text-violet-400 transition-colors",children:"Información personal"}),x.personal?(0,b.jsx)(p.ChevronUp,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"}):(0,b.jsx)(o.ChevronDown,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"})]}),x.personal&&(0,b.jsxs)("div",{className:"space-y-4 pt-2 animate-fade-in",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"nombre1",className:"text-slate-200 flex items-center gap-1.5",children:["Nombre ",(0,b.jsx)("span",{className:"text-red-400",children:"*"}),g.nombre1&&!v.nombre1&&(0,b.jsx)(r.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-400"})]}),(0,b.jsx)(i.Input,{id:"nombre1",value:g.nombre1,onChange:a=>s({...g,nombre1:a.target.value}),className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.nombre1?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`}),v.nombre1&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.nombre1]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"middle_name",className:"text-slate-200",children:"Segundo nombre"}),(0,b.jsx)(i.Input,{id:"middle_name",value:g.middle_name,onChange:a=>s({...g,middle_name:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"apellido_paterno",className:"text-slate-200 flex items-center gap-1.5",children:["Apellido paterno ",(0,b.jsx)("span",{className:"text-red-400",children:"*"}),g.apellido_paterno&&!v.apellido_paterno&&(0,b.jsx)(r.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-400"})]}),(0,b.jsx)(i.Input,{id:"apellido_paterno",value:g.apellido_paterno,onChange:a=>s({...g,apellido_paterno:a.target.value}),className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.apellido_paterno?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`}),v.apellido_paterno&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.apellido_paterno]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"apellido_materno",className:"text-slate-200",children:"Apellido materno"}),(0,b.jsx)(i.Input,{id:"apellido_materno",value:g.apellido_materno,onChange:a=>s({...g,apellido_materno:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"telefono",className:"text-slate-200 flex items-center gap-1.5",children:["Teléfono ",(0,b.jsx)("span",{className:"text-red-400",children:"*"}),10===g.telefono.length&&!v.telefono&&(0,b.jsx)(r.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-400"})]}),(0,b.jsx)(i.Input,{id:"telefono",value:g.telefono,onChange:a=>{let b;return s({...g,telefono:(b=a.target.value.replace(/\D/g,"")).length<=10?b:b.slice(0,10)})},placeholder:"5512345678",maxLength:10,className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.telefono?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`}),v.telefono&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.telefono]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"correo",className:"text-slate-200 flex items-center gap-1.5",children:["Correo electrónico",g.correo&&!v.correo&&(0,b.jsx)(r.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-400"})]}),(0,b.jsx)(i.Input,{id:"correo",type:"email",value:g.correo,onChange:a=>s({...g,correo:a.target.value}),className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.correo?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`}),v.correo&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.correo]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"rfc",className:"text-slate-200 flex items-center gap-1.5",children:["RFC",g.rfc&&!v.rfc&&(0,b.jsx)(r.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-400"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{id:"rfc",value:g.rfc,onChange:a=>s({...g,rfc:a.target.value.toUpperCase()}),className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.rfc?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`,placeholder:"XAXX010101000"}),(0,b.jsx)(h.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{s({...g,rfc:"XAXX010101000"}),f({title:"RFC genérico aplicado",description:"Se ha asignado el RFC genérico para público en general."})},className:"border-slate-700/50 text-slate-400 hover:text-slate-200 hover:bg-slate-800 shrink-0",children:"Genérico"})]}),v.rfc&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.rfc]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"sexo",className:"text-slate-200",children:"Sexo"}),(0,b.jsxs)(m.Select,{value:g.sexo,onValueChange:a=>s({...g,sexo:a}),children:[(0,b.jsx)(m.SelectTrigger,{className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20",children:(0,b.jsx)(m.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsxs)(m.SelectContent,{className:"bg-slate-800 border-slate-700",children:[(0,b.jsx)(m.SelectItem,{value:"M",children:"Masculino"}),(0,b.jsx)(m.SelectItem,{value:"F",children:"Femenino"}),(0,b.jsx)(m.SelectItem,{value:"O",children:"Otro"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"edad",className:"text-slate-200",children:"Edad"}),(0,b.jsx)(i.Input,{id:"edad",type:"number",value:g.edad,onChange:a=>s({...g,edad:a.target.value}),className:`bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all ${v.edad?"border-red-500/50 focus:border-red-500 focus:ring-red-500/20":""}`}),v.edad&&(0,b.jsxs)("p",{className:"text-xs text-red-400 flex items-center gap-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),v.edad]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"tipo_cliente",className:"text-slate-200",children:"Tipo de cliente"}),(0,b.jsxs)(m.Select,{value:g.tipo_cliente,onValueChange:a=>s({...g,tipo_cliente:a}),children:[(0,b.jsx)(m.SelectTrigger,{className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20",children:(0,b.jsx)(m.SelectValue,{placeholder:"Seleccionar"})}),(0,b.jsxs)(m.SelectContent,{className:"bg-slate-800 border-slate-700",children:[(0,b.jsx)(m.SelectItem,{value:"publico_general",children:"Público general"}),(0,b.jsx)(m.SelectItem,{value:"empresa",children:"Empresa"}),(0,b.jsx)(m.SelectItem,{value:"recurrente",children:"Recurrente"})]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border border-slate-800/50 rounded-lg p-4 bg-slate-900/30",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y({...x,direccion:!x.direccion}),className:"flex items-center justify-between w-full text-left group",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-100 group-hover:text-violet-400 transition-colors",children:"Dirección"}),x.direccion?(0,b.jsx)(p.ChevronUp,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"}):(0,b.jsx)(o.ChevronDown,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"})]}),x.direccion&&(0,b.jsxs)("div",{className:"space-y-4 pt-2 animate-fade-in",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(j.Label,{htmlFor:"calle",className:"text-slate-200",children:"Calle"}),(0,b.jsx)(i.Input,{id:"calle",value:g.calle,onChange:a=>s({...g,calle:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"numero",className:"text-slate-200",children:"Número"}),(0,b.jsx)(i.Input,{id:"numero",value:g.numero,onChange:a=>s({...g,numero:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"colonia",className:"text-slate-200",children:"Colonia"}),(0,b.jsx)(i.Input,{id:"colonia",value:g.colonia,onChange:a=>s({...g,colonia:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"municipio",className:"text-slate-200",children:"Municipio"}),(0,b.jsx)(i.Input,{id:"municipio",value:g.municipio,onChange:a=>s({...g,municipio:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"estado",className:"text-slate-200",children:"Estado"}),(0,b.jsx)(i.Input,{id:"estado",value:g.estado,onChange:a=>s({...g,estado:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"pais",className:"text-slate-200",children:"País"}),(0,b.jsx)(i.Input,{id:"pais",value:g.pais,onChange:a=>s({...g,pais:a.target.value}),className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border border-slate-800/50 rounded-lg p-4 bg-slate-900/30",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>y({...x,otros:!x.otros}),className:"flex items-center justify-between w-full text-left group",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-100 group-hover:text-violet-400 transition-colors",children:"Otros datos"}),x.otros?(0,b.jsx)(p.ChevronUp,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"}):(0,b.jsx)(o.ChevronDown,{className:"h-5 w-5 text-slate-400 group-hover:text-violet-400 transition-colors"})]}),x.otros&&(0,b.jsxs)("div",{className:"space-y-4 pt-2 animate-fade-in",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"notas_internas",className:"text-slate-200 flex items-center gap-1.5",children:["Notas internas",(0,b.jsx)(t,{className:"h-3.5 w-3.5 text-slate-500"})]}),(0,b.jsx)(l.Textarea,{id:"notas_internas",value:g.notas_internas,onChange:a=>s({...g,notas_internas:a.target.value}),placeholder:"Información adicional visible solo para el personal...",rows:4,className:"bg-slate-800/50 border-slate-700/50 text-slate-100 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all resize-none"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Solo visible para el personal del taller"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:"activo",checked:g.activo,onCheckedChange:a=>s({...g,activo:!!a})}),(0,b.jsx)(j.Label,{htmlFor:"activo",className:"text-slate-200 cursor-pointer",children:"Cliente activo"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800/50",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:a,className:"border-slate-700/50 text-slate-300 bg-transparent hover:bg-slate-800/50",children:"Cancelar"}),(0,b.jsx)(h.Button,{type:"submit",className:"bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 shadow-lg shadow-indigo-500/20 transition-all duration-300 hover:shadow-indigo-500/30 hover:scale-[1.02]",children:"Guardar cliente"})]})]})}var w=a.i(88237),x=a.i(65733),y=a.i(7554),z=a.i(70121),A=a.i(50104),B=a.i(96743),C=a.i(86228),D=a.i(22297),E=a.i(92843),F=a.i(4691),G=a.i(92616),H=a.i(77192),I=a.i(30553),J=a.i(11011),K=a.i(25152),L=a.i(41852),M=a.i(52081),N="Popover",[O,P]=(0,A.createContextScope)(N,[F.createPopperScope]),Q=(0,F.createPopperScope)(),[R,S]=O(N),T=a=>{let{__scopePopover:d,children:e,open:f,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,j=Q(d),k=c.useRef(null),[l,m]=c.useState(!1),[n=!1,o]=(0,K.useControllableState)({prop:f,defaultProp:g,onChange:h});return(0,b.jsx)(F.Root,{...j,children:(0,b.jsx)(R,{scope:d,contentId:(0,E.useId)(),triggerRef:k,open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),hasCustomAnchor:l,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:i,children:e})})};T.displayName=N;var U="PopoverAnchor";c.forwardRef((a,d)=>{let{__scopePopover:e,...f}=a,g=S(U,e),h=Q(e),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return c.useEffect(()=>(i(),()=>j()),[i,j]),(0,b.jsx)(F.Anchor,{...h,...f,ref:d})}).displayName=U;var V="PopoverTrigger",W=c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=S(V,d),g=Q(d),h=(0,z.useComposedRefs)(c,f.triggerRef),i=(0,b.jsx)(I.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":af(f.open),...e,ref:h,onClick:(0,y.composeEventHandlers)(a.onClick,f.onOpenToggle)});return f.hasCustomAnchor?i:(0,b.jsx)(F.Anchor,{asChild:!0,...g,children:i})});W.displayName=V;var X="PopoverPortal",[Y,Z]=O(X,{forceMount:void 0}),$=a=>{let{__scopePopover:c,forceMount:d,children:e,container:f}=a,g=S(X,c);return(0,b.jsx)(Y,{scope:c,forceMount:d,children:(0,b.jsx)(H.Presence,{present:d||g.open,children:(0,b.jsx)(G.Portal,{asChild:!0,container:f,children:e})})})};$.displayName=X;var _="PopoverContent",aa=c.forwardRef((a,c)=>{let d=Z(_,a.__scopePopover),{forceMount:e=d.forceMount,...f}=a,g=S(_,a.__scopePopover);return(0,b.jsx)(H.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(ab,{...f,ref:c}):(0,b.jsx)(ac,{...f,ref:c})})});aa.displayName=_;var ab=c.forwardRef((a,d)=>{let e=S(_,a.__scopePopover),f=c.useRef(null),g=(0,z.useComposedRefs)(d,f),h=c.useRef(!1);return c.useEffect(()=>{let a=f.current;if(a)return(0,L.hideOthers)(a)},[]),(0,b.jsx)(M.RemoveScroll,{as:J.Slot,allowPinchZoom:!0,children:(0,b.jsx)(ad,{...a,ref:g,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,y.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),h.current||e.triggerRef.current?.focus()}),onPointerDownOutside:(0,y.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;h.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,y.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),ac=c.forwardRef((a,d)=>{let e=S(_,a.__scopePopover),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(ad,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),ad=c.forwardRef((a,c)=>{let{__scopePopover:d,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onInteractOutside:l,...m}=a,n=S(_,d),o=Q(d);return(0,C.useFocusGuards)(),(0,b.jsx)(D.FocusScope,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,b.jsx)(B.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onDismiss:()=>n.onOpenChange(!1),children:(0,b.jsx)(F.Content,{"data-state":af(n.open),role:"dialog",id:n.contentId,...o,...m,ref:c,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ae="PopoverClose";function af(a){return a?"open":"closed"}c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=S(ae,d);return(0,b.jsx)(I.Primitive.button,{type:"button",...e,ref:c,onClick:(0,y.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})}).displayName=ae,c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=Q(d);return(0,b.jsx)(F.Arrow,{...f,...e,ref:c})}).displayName="PopoverArrow";var ag=a.i(97895);function ah({...a}){return(0,b.jsx)(T,{"data-slot":"popover",...a})}function ai({...a}){return(0,b.jsx)(W,{"data-slot":"popover-trigger",...a})}function aj({className:a,align:c="center",sideOffset:d=4,...e}){return(0,b.jsx)($,{children:(0,b.jsx)(aa,{"data-slot":"popover-content",align:c,sideOffset:d,className:(0,ag.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...e})})}var ak=a.i(87532),al=a.i(15618),am=a.i(60246);let an=(0,s.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ao=(0,s.default)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);var ap=a.i(11300),aq=a.i(83497),ar=a.i(77156);let as=[{id:1,nombre:"Juan Pérez García",telefono:"5512345678",correo:"juan.perez@email.com",fecha_registro:"2024-03-15",num_equipos:3,ultimo_servicio:"2024-12-10",ordenes_activas:1,es_recurrente:!0,equipos:[{id:101,marca:"Dell",modelo:"Latitude 5420",serie:"DL2024X001"},{id:102,marca:"HP",modelo:"ProBook 450",serie:"HP2024X002"},{id:103,marca:"Lenovo",modelo:"ThinkPad X1",serie:"LN2024X003"}]},{id:2,nombre:"María González López",telefono:"5587654321",correo:"maria.gonzalez@email.com",fecha_registro:"2024-06-20",num_equipos:1,ultimo_servicio:"2024-11-28",ordenes_activas:0,es_recurrente:!1,equipos:[{id:201,marca:"Asus",modelo:"VivoBook 15",serie:"AS2024X004"}]},{id:3,nombre:"Pedro Ramírez Sánchez",telefono:"5523456789",correo:"pedro.ramirez@email.com",fecha_registro:"2024-08-10",num_equipos:2,ultimo_servicio:"2024-12-05",ordenes_activas:2,es_recurrente:!0,equipos:[{id:301,marca:"Acer",modelo:"Aspire 5",serie:"AC2024X005"},{id:302,marca:"MSI",modelo:"Modern 14",serie:"MS2024X006"}]},{id:4,nombre:"Ana López Martínez",telefono:"5598765432",correo:"ana.lopez@email.com",fecha_registro:"2024-11-05",num_equipos:1,ultimo_servicio:"2024-12-15",ordenes_activas:1,es_recurrente:!1,equipos:[{id:401,marca:"Apple",modelo:"MacBook Air M2",serie:"AP2024X007"}]},{id:5,nombre:"Carlos Hernández Torres",telefono:"5534567890",correo:"carlos.hernandez@email.com",fecha_registro:"2024-12-01",num_equipos:4,ultimo_servicio:null,ordenes_activas:0,es_recurrente:!1,equipos:[{id:501,marca:"Dell",modelo:"XPS 13",serie:"DL2024X008"},{id:502,marca:"HP",modelo:"Pavilion",serie:"HP2024X009"},{id:503,marca:"Lenovo",modelo:"IdeaPad 3",serie:"LN2024X010"},{id:504,marca:"Samsung",modelo:"Galaxy Book",serie:"SM2024X011"}]},{id:6,nombre:"Laura Martínez Ruiz",telefono:"5545678901",correo:"laura.martinez@email.com",fecha_registro:"2024-01-20",num_equipos:2,ultimo_servicio:"2024-06-15",ordenes_activas:0,es_recurrente:!1,equipos:[{id:601,marca:"Asus",modelo:"ROG Strix",serie:"AS2024X012"},{id:602,marca:"Acer",modelo:"Nitro 5",serie:"AC2024X013"}]}];function at(){let{hasPermission:a}=(0,e.useAuth)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)("all"),[p,q]=(0,c.useState)(null);if(!a("clientes"))return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.DashboardHeader,{title:"Clientes"}),(0,b.jsx)(f.AccessDenied,{})]});let r=as.filter(a=>{let b=j.toLowerCase(),c=""===j||a.nombre.toLowerCase().includes(b)||a.telefono.includes(j)||a.correo.toLowerCase().includes(b)||a.equipos.some(a=>a.marca.toLowerCase().includes(b)||a.modelo.toLowerCase().includes(b)||a.serie.toLowerCase().includes(b)),d=new Date;d.setDate(d.getDate()-30);let e=new Date(a.fecha_registro),f="all"===n||"new"===n&&e>=d||"active-orders"===n&&a.ordenes_activas>0||"inactive"===n&&a.ultimo_servicio&&new Date(a.ultimo_servicio)<d||"multi-equipment"===n&&a.num_equipos>1||"recurring"===n&&a.es_recurrente;return c&&f}),s=as.length,t=as.filter(a=>{let b=new Date(a.fecha_registro),c=new Date;return b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}).length,u=as.filter(a=>a.es_recurrente).length,y=as.filter(a=>a.ordenes_activas>0).length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.DashboardHeader,{title:"Clientes"}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6 animate-fade-in",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(g.Card,{className:"bg-gradient-to-br from-slate-900 to-slate-900/50 border-slate-800/50 p-4 hover:shadow-lg hover:shadow-violet-500/10 transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-lg bg-violet-500/10 border border-violet-500/20",children:(0,b.jsx)(am.Users,{className:"h-5 w-5 text-violet-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"Total de clientes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:s})]})]})}),(0,b.jsx)(g.Card,{className:"bg-gradient-to-br from-slate-900 to-slate-900/50 border-slate-800/50 p-4 hover:shadow-lg hover:shadow-emerald-500/10 transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:(0,b.jsx)(an,{className:"h-5 w-5 text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"Nuevos del mes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:t})]})]})}),(0,b.jsx)(g.Card,{className:"bg-gradient-to-br from-slate-900 to-slate-900/50 border-slate-800/50 p-4 hover:shadow-lg hover:shadow-blue-500/10 transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,b.jsx)(ao,{className:"h-5 w-5 text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"Clientes recurrentes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:u})]})]})}),(0,b.jsx)(g.Card,{className:"bg-gradient-to-br from-slate-900 to-slate-900/50 border-slate-800/50 p-4 hover:shadow-lg hover:shadow-amber-500/10 transition-all duration-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-lg bg-amber-500/10 border border-amber-500/20",children:(0,b.jsx)(ap.ClipboardList,{className:"h-5 w-5 text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"Con órdenes activas"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-100",children:y})]})]})})]}),(0,b.jsx)(g.Card,{className:"bg-slate-900/50 border-slate-800/50 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(ak.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),(0,b.jsx)(i.Input,{placeholder:"Buscar por nombre, teléfono, correo, equipo o serie...",value:j,onChange:a=>k(a.target.value),className:"pl-10 bg-slate-800/50 border-slate-700/50 text-slate-100 placeholder:text-slate-500 focus:border-violet-500/50 focus:ring-1 focus:ring-violet-500/20 transition-all"})]}),(0,b.jsxs)(h.Button,{onClick:()=>m(!0),className:"bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 shadow-lg shadow-indigo-500/20 transition-all duration-300 hover:shadow-indigo-500/30 hover:scale-[1.02]",children:[(0,b.jsx)(al.Plus,{className:"h-4 w-4 mr-2"}),"Nuevo cliente"]})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(h.Button,{size:"sm",variant:"all"===n?"default":"outline",onClick:()=>o("all"),className:"all"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:["Todos (",as.length,")"]}),(0,b.jsx)(h.Button,{size:"sm",variant:"new"===n?"default":"outline",onClick:()=>o("new"),className:"new"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:"Nuevos (30 días)"}),(0,b.jsx)(h.Button,{size:"sm",variant:"active-orders"===n?"default":"outline",onClick:()=>o("active-orders"),className:"active-orders"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:"Con órdenes activas"}),(0,b.jsx)(h.Button,{size:"sm",variant:"inactive"===n?"default":"outline",onClick:()=>o("inactive"),className:"inactive"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:"Inactivos"}),(0,b.jsx)(h.Button,{size:"sm",variant:"multi-equipment"===n?"default":"outline",onClick:()=>o("multi-equipment"),className:"multi-equipment"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:"Múltiples equipos"}),(0,b.jsx)(h.Button,{size:"sm",variant:"recurring"===n?"default":"outline",onClick:()=>o("recurring"),className:"recurring"===n?"bg-violet-600 hover:bg-violet-500 border-0":"bg-slate-800/50 border-slate-700/50 text-slate-300 hover:bg-slate-800 hover:text-slate-100",children:"Recurrentes"})]}),(0,b.jsx)(g.Card,{className:"bg-slate-900/50 border-slate-800/50 backdrop-blur-sm overflow-hidden",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:"border-slate-800/50 hover:bg-slate-800/30",children:[(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Nombre completo"}),(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Teléfono"}),(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Correo"}),(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Fecha de registro"}),(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Nº de equipos"}),(0,b.jsx)(w.TableHead,{className:"text-slate-400 font-semibold",children:"Acciones"})]})}),(0,b.jsx)(w.TableBody,{children:0===r.length?(0,b.jsx)(w.TableRow,{className:"border-slate-800/50",children:(0,b.jsxs)(w.TableCell,{colSpan:6,className:"text-center text-slate-400 py-12",children:[(0,b.jsx)(am.Users,{className:"h-12 w-12 mx-auto mb-3 text-slate-600"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"No se encontraron clientes"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Intenta ajustar los filtros de búsqueda"})]})}):r.map((a,c)=>(0,b.jsxs)(w.TableRow,{className:`border-slate-800/30 hover:bg-slate-800/40 transition-all duration-200 text-slate-300 ${c%2==0?"bg-slate-900/20":"bg-slate-900/40"}`,children:[(0,b.jsx)(w.TableCell,{className:"font-medium text-slate-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.nombre,a.es_recurrente&&(0,b.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20",children:(0,b.jsx)(ao,{className:"h-3 w-3"})})]})}),(0,b.jsx)(w.TableCell,{className:"text-slate-300",children:a.telefono}),(0,b.jsx)(w.TableCell,{className:"text-slate-400",children:a.correo}),(0,b.jsx)(w.TableCell,{className:"text-slate-400",children:a.fecha_registro}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)(ah,{open:p===a.id,onOpenChange:b=>q(b?a.id:null),children:[(0,b.jsx)(ai,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"text-violet-400 hover:text-violet-300 hover:bg-violet-500/10 gap-1.5 transition-all",children:[(0,b.jsx)(aq.Package,{className:"h-3.5 w-3.5"}),a.num_equipos]})}),(0,b.jsxs)(aj,{className:"bg-slate-900 border-slate-700/50 text-slate-100 w-[420px] p-0 shadow-xl shadow-black/50",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-slate-800/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-semibold text-base text-slate-100",children:"Equipos del cliente"}),(0,b.jsxs)("span",{className:"text-xs text-slate-500 bg-slate-800/50 px-2 py-1 rounded",children:[a.equipos.length," ",1===a.equipos.length?"equipo":"equipos"]})]}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:a.nombre})]}),(0,b.jsx)("div",{className:"max-h-[320px] overflow-y-auto p-3 space-y-2",children:a.equipos.map(a=>(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-slate-800/40 border border-slate-700/50 hover:border-violet-500/40 hover:bg-slate-800/60 transition-all group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-slate-100 mb-0.5",children:[a.marca," ",a.modelo]}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)("p",{className:"text-xs text-slate-400",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Marca:"})," ",a.marca]}),(0,b.jsxs)("p",{className:"text-xs text-slate-400",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Modelo:"})," ",a.modelo]}),(0,b.jsxs)("p",{className:"text-xs text-slate-400",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"Serie:"})," ",a.serie]})]})]}),(0,b.jsxs)("span",{className:"text-xs text-slate-500 font-mono bg-slate-900/50 px-2 py-1 rounded",children:["#",a.id]})]}),(0,b.jsxs)(h.Button,{size:"sm",variant:"ghost",className:"w-full text-xs text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 border border-transparent hover:border-indigo-500/20 transition-all mt-2",onClick:()=>{console.log("[v0] Ver equipo:",a.id)},children:[(0,b.jsx)(ar.Eye,{className:"h-3.5 w-3.5 mr-1.5"}),"Ver equipo"]})]},a.id))}),(0,b.jsx)("div",{className:"p-3 border-t border-slate-800/50 bg-slate-900/50",children:(0,b.jsxs)(h.Button,{size:"sm",className:"w-full bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-500 hover:to-indigo-500 text-white shadow-lg shadow-violet-500/20 hover:shadow-violet-500/30 transition-all",onClick:()=>{console.log("[v0] Agregar nuevo equipo para cliente:",a.id),q(null)},children:[(0,b.jsx)(al.Plus,{className:"h-4 w-4 mr-2"}),"Agregar nuevo equipo"]})})]})]})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)(h.Button,{size:"sm",variant:"ghost",className:"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 transition-all",children:"Detalles"})})]},a.id))})]})})]})}),(0,b.jsx)(x.Dialog,{open:l,onOpenChange:m,children:(0,b.jsxs)(x.DialogContent,{className:"bg-slate-900 border-slate-800 text-slate-100 max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(x.DialogHeader,{children:(0,b.jsx)(x.DialogTitle,{className:"text-slate-100 text-xl",children:"Nuevo cliente"})}),(0,b.jsx)(v,{onClose:()=>m(!1)})]})})]})}a.s(["default",()=>at],79606)}];

//# sourceMappingURL=app_dashboard_clientes_page_tsx_59b454f9._.js.map